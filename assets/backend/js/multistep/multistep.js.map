{"version":3,"sources":["webpack://Drawflow/webpack/universalModuleDefinition","webpack://Drawflow/webpack/bootstrap","webpack://Drawflow/./assets_src/backend/js/multistep.js"],"names":["Drawflow","container","render","parent","events","precanvas","nodeId","ele_selected","node_selected","drag","reroute","reroute_fix_curvature","curvature","reroute_curvature_start_end","reroute_curvature","reroute_width","drag_point","editor_selected","connection","connection_ele","connection_selected","canvas_x","canvas_y","pos_x","pos_x_start","pos_y","pos_y_start","mouse_x","mouse_y","line_path","first_click","force_first_input","draggable_inputs","useuuid","noderegister","drawflow","Home","data","module","editor_mode","zoom","zoom_max","zoom_min","zoom_value","zoom_last_value","evCache","Array","prevDiff","console","log","JSON","stringify","export","classList","add","tabIndex","document","createElement","appendChild","addEventListener","dragEnd","bind","position","click","contextmenu","key","zoom_enter","updateNodeValue","dblclick","onpointerdown","pointerdown_handler","onpointermove","pointermove_handler","onpointerup","pointerup_handler","onpointercancel","onpointerout","onpointerleave","load","ev","push","i","length","pointerId","curDiff","Math","abs","clientX","zoom_in","zoom_out","remove_event","splice","addNodeImport","addRerouteImport","updateConnectionNodes","editor","number","Object","keys","map","moduleName","index","id","index2","parseInt","dispatch","parentElement","querySelectorAll","forEach","item","remove","getElementById","e","preventDefault","target","closest","matches","button","contextmenuDel","removeReouteConnectionSelected","slice","tagName","hasAttribute","drawConnection","listclassConnection","output_id","input_id","output_class","input_class","removeNodeId","removeConnection","type","touches","clientY","includes","e_pos_x","e_pos_y","updateConnection","x","y","style","transform","clientWidth","clientHeight","top","offsetTop","left","offsetLeft","getBoundingClientRect","setAttributeNS","nodeUpdate","nodeUpdateIn","numberPointPosition","from","children","indexOf","numberMainPath","searchConnection","outputs","connections","findIndex","node","output","points","parentSelected","ele_last","elementFromPoint","getNodeFromId","inputs","id_input","id_output","input","getElementsByClassName","deletebox","innerHTML","metaKey","event","delta","ctrlKey","deltaY","zoom_refresh","start_pos_x","start_pos_y","end_pos_x","end_pos_y","curvature_value","line_x","line_y","hx1","hx2","ele","createElementNS","path","eX","eY","precanvasWitdhZoom","precanvasHeightZoom","offsetWidth","offsetHeight","lineCurve","createCurvature","nodeOneModule","getModuleFromNodeId","nodeTwoModule","dataNode","exist","checkOutput","connectionSearch","toString","idSearch","idSearchOut","rerouteWidth","elemsOut","querySelector","elemtsearchId_out","id_search","replace","elemtsearchId","elemtsearch","elemtsearchOut","linecurve","reoute_fix","lineCurveSearch","elemtsearchIn","itempath","elems","elemtsearchId_in","createReroutePoint","removeReroutePoint","point","position_add_array_point","numberPoints","insertBefore","search_point","undefined","name","html","props","options","parse","nodes","num_in","num_out","ele_pos_x","ele_pos_y","classoverride","typenode","newNodeId","getUuid","setAttribute","split","uifm_options","uifm_options_delete","json_inputs","json_outputs","content","cloneNode","version","wrapper","h","appContext","$mount","$el","entries","value","insertObjectkeys","isContentEditable","innerText","object","completname","json","class","display","self","contains","selectNode","input_item","output_item","z","attr","attributes","nodeName","startsWith","newName","infoNode","numInputs","numOutputs","removeInputs","removeSingleConnection","connectionsInputs","input_class_id","nodeUpdates","itemx","f","Set","eles","id_class","itemz","g","removeOutputs","connectionsOuputs","output_class_id","removeConnectionNodeId","listclass","index_out","index_in","exists","idSearchIn","elemsIn","nameModule","import","changeModule","dataExport","notifi","clear","callback","error","listeners","listenerIndex","hasListener","details","listener","s","hexDigits","substr","floor","random","uuid","join"],"mappings":"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","file":"multistep/multistep.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Drawflow\"] = factory();\n\telse\n\t\troot[\"Drawflow\"] = factory();\n})((typeof self !== 'undefined' ? self : this), function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./assets_src/backend/js/multistep.js\");\n","class Drawflow {\n\tconstructor(container, render = null, parent = null) {\n\t\tthis.events = {};\n\t\tthis.container = container;\n\t\tthis.precanvas = null;\n\t\tthis.nodeId = 1;\n\t\tthis.ele_selected = null;\n\t\tthis.node_selected = null;\n\t\tthis.drag = false;\n\t\tthis.reroute = false;\n\t\tthis.reroute_fix_curvature = false;\n\t\tthis.curvature = 0.5;\n\t\tthis.reroute_curvature_start_end = 0.5;\n\t\tthis.reroute_curvature = 0.5;\n\t\tthis.reroute_width = 6;\n\t\tthis.drag_point = false;\n\t\tthis.editor_selected = false;\n\t\tthis.connection = false;\n\t\tthis.connection_ele = null;\n\t\tthis.connection_selected = null;\n\t\tthis.canvas_x = 0;\n\t\tthis.canvas_y = 0;\n\t\tthis.pos_x = 0;\n\t\tthis.pos_x_start = 0;\n\t\tthis.pos_y = 0;\n\t\tthis.pos_y_start = 0;\n\t\tthis.mouse_x = 0;\n\t\tthis.mouse_y = 0;\n\t\tthis.line_path = 5;\n\t\tthis.first_click = null;\n\t\tthis.force_first_input = false;\n\t\tthis.draggable_inputs = true;\n\t\tthis.useuuid = false;\n\t\tthis.parent = parent;\n\n\t\tthis.noderegister = {};\n\t\tthis.render = render;\n\t\tthis.drawflow = { drawflow: { Home: { data: {} } } };\n\t\t// Configurable options\n\t\tthis.module = 'Home';\n\t\tthis.editor_mode = 'edit';\n\t\tthis.zoom = 1;\n\t\tthis.zoom_max = 1.6;\n\t\tthis.zoom_min = 0.5;\n\t\tthis.zoom_value = 0.1;\n\t\tthis.zoom_last_value = 1;\n\n\t\t// Mobile\n\t\tthis.evCache = new Array();\n\t\tthis.prevDiff = -1;\n\t}\n\tshowExport() {\n\t\tconsole.log(JSON.stringify(this.export(), null, 4));\n\t}\n\tstart() {\n\t\t// console.info(\"Start Drawflow!!\");\n\t\tthis.container.classList.add('parent-drawflow');\n\t\tthis.container.tabIndex = 0;\n\t\tthis.precanvas = document.createElement('div');\n\t\tthis.precanvas.classList.add('drawflow');\n\t\tthis.container.appendChild(this.precanvas);\n\n\t\t/* Mouse and Touch Actions */\n\t\tthis.container.addEventListener('mouseup', this.dragEnd.bind(this));\n\t\tthis.container.addEventListener('mousemove', this.position.bind(this));\n\t\tthis.container.addEventListener('mousedown', this.click.bind(this));\n\n\t\tthis.container.addEventListener('touchend', this.dragEnd.bind(this));\n\t\tthis.container.addEventListener('touchmove', this.position.bind(this));\n\t\tthis.container.addEventListener('touchstart', this.click.bind(this));\n\n\t\t/* Context Menu */\n\t\tthis.container.addEventListener('contextmenu', this.contextmenu.bind(this));\n\t\t/* Delete */\n\t\tthis.container.addEventListener('keydown', this.key.bind(this));\n\n\t\t/* Zoom Mouse */\n\t\tthis.container.addEventListener('wheel', this.zoom_enter.bind(this));\n\t\t/* Update data Nodes */\n\t\tthis.container.addEventListener('input', this.updateNodeValue.bind(this));\n\n\t\tthis.container.addEventListener('dblclick', this.dblclick.bind(this));\n\t\t/* Mobile zoom */\n\t\tthis.container.onpointerdown = this.pointerdown_handler.bind(this);\n\t\tthis.container.onpointermove = this.pointermove_handler.bind(this);\n\t\tthis.container.onpointerup = this.pointerup_handler.bind(this);\n\t\tthis.container.onpointercancel = this.pointerup_handler.bind(this);\n\t\tthis.container.onpointerout = this.pointerup_handler.bind(this);\n\t\tthis.container.onpointerleave = this.pointerup_handler.bind(this);\n\n\t\tthis.load();\n\t}\n\n\t/* Mobile zoom */\n\tpointerdown_handler(ev) {\n\t\tthis.evCache.push(ev);\n\t}\n\n\tpointermove_handler(ev) {\n\t\tfor (var i = 0; i < this.evCache.length; i++) {\n\t\t\tif (ev.pointerId == this.evCache[i].pointerId) {\n\t\t\t\tthis.evCache[i] = ev;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (this.evCache.length == 2) {\n\t\t\t// Calculate the distance between the two pointers\n\t\t\tvar curDiff = Math.abs(this.evCache[0].clientX - this.evCache[1].clientX);\n\n\t\t\tif (this.prevDiff > 100) {\n\t\t\t\tif (curDiff > this.prevDiff) {\n\t\t\t\t\t// The distance between the two pointers has increased\n\n\t\t\t\t\tthis.zoom_in();\n\t\t\t\t}\n\t\t\t\tif (curDiff < this.prevDiff) {\n\t\t\t\t\t// The distance between the two pointers has decreased\n\t\t\t\t\tthis.zoom_out();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.prevDiff = curDiff;\n\t\t}\n\t}\n\n\tpointerup_handler(ev) {\n\t\tthis.remove_event(ev);\n\t\tif (this.evCache.length < 2) {\n\t\t\tthis.prevDiff = -1;\n\t\t}\n\t}\n\tremove_event(ev) {\n\t\t// Remove this event from the target's cache\n\t\tfor (var i = 0; i < this.evCache.length; i++) {\n\t\t\tif (this.evCache[i].pointerId == ev.pointerId) {\n\t\t\t\tthis.evCache.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t/* End Mobile Zoom */\n\tload() {\n\t\tfor (var key in this.drawflow.drawflow[this.module].data) {\n\t\t\tthis.addNodeImport(this.drawflow.drawflow[this.module].data[key], this.precanvas);\n\t\t}\n\n\t\tif (this.reroute) {\n\t\t\tfor (var key in this.drawflow.drawflow[this.module].data) {\n\t\t\t\tthis.addRerouteImport(this.drawflow.drawflow[this.module].data[key]);\n\t\t\t}\n\t\t}\n\n\t\tfor (var key in this.drawflow.drawflow[this.module].data) {\n\t\t\tthis.updateConnectionNodes('node-' + key);\n\t\t}\n\n\t\tconst editor = this.drawflow.drawflow;\n\t\tlet number = 1;\n\t\tObject.keys(editor).map(function(moduleName, index) {\n\t\t\tObject.keys(editor[moduleName].data).map(function(id, index2) {\n\t\t\t\tif (parseInt(id) >= number) {\n\t\t\t\t\tnumber = parseInt(id) + 1;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tthis.nodeId = number;\n\t}\n\n\tremoveReouteConnectionSelected() {\n\t\tthis.dispatch('connectionUnselected', true);\n\t\tif (this.reroute_fix_curvature) {\n\t\t\tthis.connection_selected.parentElement.querySelectorAll('.main-path').forEach((item, i) => {\n\t\t\t\titem.classList.remove('selected');\n\t\t\t});\n\t\t}\n\t}\n\tselectNode(id) {\n\t\tthis.node_selected = document.getElementById('node-' + id);\n\t\tthis.node_selected.classList.add('selected');\n\t\tthis.dispatch('nodeSelected', id);\n\t}\n\tclick(e) {\n\t\tthis.dispatch('click', e);\n\t\tif (this.editor_mode === 'fixed') {\n\t\t\t//return false;\n\t\t\te.preventDefault();\n\t\t\tif (e.target.classList[0] === 'parent-drawflow' || e.target.classList[0] === 'drawflow') {\n\t\t\t\tthis.ele_selected = e.target.closest('.parent-drawflow');\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if (this.editor_mode === 'view') {\n\t\t\tif (e.target.closest('.drawflow') != null || e.target.matches('.parent-drawflow')) {\n\t\t\t\tthis.ele_selected = e.target.closest('.parent-drawflow');\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.first_click = e.target;\n\t\t\tthis.ele_selected = e.target;\n\t\t\tif (e.button === 0) {\n\t\t\t\tthis.contextmenuDel();\n\t\t\t}\n\n\t\t\tif (e.target.closest('.drawflow_content_node') != null) {\n\t\t\t\tthis.ele_selected = e.target.closest('.drawflow_content_node').parentElement;\n\t\t\t}\n\t\t}\n\t\tswitch (this.ele_selected?.classList[0]) {\n\t\t\tcase 'drawflow-node':\n\t\t\t\tif (this.node_selected != null) {\n\t\t\t\t\tthis.node_selected.classList.remove('selected');\n\t\t\t\t\tif (this.node_selected != this.ele_selected) {\n\t\t\t\t\t\tthis.dispatch('nodeUnselected', true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.connection_selected != null) {\n\t\t\t\t\tthis.connection_selected.classList.remove('selected');\n\t\t\t\t\tthis.removeReouteConnectionSelected();\n\t\t\t\t\tthis.connection_selected = null;\n\t\t\t\t}\n\t\t\t\tif (this.node_selected != this.ele_selected) {\n\t\t\t\t\tthis.dispatch('nodeSelected', this.ele_selected.id.slice(5));\n\t\t\t\t}\n\t\t\t\tthis.node_selected = this.ele_selected;\n\n\t\t\t\tthis.node_selected.classList.add('selected');\n\t\t\t\tif (!this.draggable_inputs) {\n\t\t\t\t\tif (e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA' && e.target.tagName !== 'SELECT' && e.target.hasAttribute('contenteditable') !== true) {\n\t\t\t\t\t\tthis.drag = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (e.target.tagName !== 'SELECT') {\n\t\t\t\t\t\tthis.drag = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'output':\n\t\t\t\tthis.connection = true;\n\t\t\t\tif (this.node_selected != null) {\n\t\t\t\t\tthis.node_selected.classList.remove('selected');\n\t\t\t\t\tthis.node_selected = null;\n\t\t\t\t\tthis.dispatch('nodeUnselected', true);\n\t\t\t\t}\n\t\t\t\tif (this.connection_selected != null) {\n\t\t\t\t\tthis.connection_selected.classList.remove('selected');\n\t\t\t\t\tthis.removeReouteConnectionSelected();\n\t\t\t\t\tthis.connection_selected = null;\n\t\t\t\t}\n\t\t\t\tthis.drawConnection(e.target);\n\t\t\t\tbreak;\n\t\t\tcase 'parent-drawflow':\n\t\t\t\tif (this.node_selected != null) {\n\t\t\t\t\tthis.node_selected.classList.remove('selected');\n\t\t\t\t\tthis.node_selected = null;\n\t\t\t\t\tthis.dispatch('nodeUnselected', true);\n\t\t\t\t}\n\t\t\t\tif (this.connection_selected != null) {\n\t\t\t\t\tthis.connection_selected.classList.remove('selected');\n\t\t\t\t\tthis.removeReouteConnectionSelected();\n\t\t\t\t\tthis.connection_selected = null;\n\t\t\t\t}\n\t\t\t\tthis.editor_selected = true;\n\t\t\t\tbreak;\n\t\t\tcase 'drawflow':\n\t\t\t\tif (this.node_selected != null) {\n\t\t\t\t\tthis.node_selected.classList.remove('selected');\n\t\t\t\t\tthis.node_selected = null;\n\t\t\t\t\tthis.dispatch('nodeUnselected', true);\n\t\t\t\t}\n\t\t\t\tif (this.connection_selected != null) {\n\t\t\t\t\tthis.connection_selected.classList.remove('selected');\n\t\t\t\t\tthis.removeReouteConnectionSelected();\n\t\t\t\t\tthis.connection_selected = null;\n\t\t\t\t}\n\t\t\t\tthis.editor_selected = true;\n\t\t\t\tbreak;\n\t\t\tcase 'main-path':\n\t\t\t\tif (this.node_selected != null) {\n\t\t\t\t\tthis.node_selected.classList.remove('selected');\n\t\t\t\t\tthis.node_selected = null;\n\t\t\t\t\tthis.dispatch('nodeUnselected', true);\n\t\t\t\t}\n\t\t\t\tif (this.connection_selected != null) {\n\t\t\t\t\tthis.connection_selected.classList.remove('selected');\n\t\t\t\t\tthis.removeReouteConnectionSelected();\n\t\t\t\t\tthis.connection_selected = null;\n\t\t\t\t}\n\t\t\t\tthis.connection_selected = this.ele_selected;\n\t\t\t\tthis.connection_selected.classList.add('selected');\n\t\t\t\tconst listclassConnection = this.connection_selected.parentElement.classList;\n\t\t\t\tif (listclassConnection.length > 1) {\n\t\t\t\t\tthis.dispatch('connectionSelected', { output_id: listclassConnection[2].slice(14), input_id: listclassConnection[1].slice(13), output_class: listclassConnection[3], input_class: listclassConnection[4] });\n\t\t\t\t\tif (this.reroute_fix_curvature) {\n\t\t\t\t\t\tthis.connection_selected.parentElement.querySelectorAll('.main-path').forEach((item, i) => {\n\t\t\t\t\t\t\titem.classList.add('selected');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'point':\n\t\t\t\tthis.drag_point = true;\n\t\t\t\tthis.ele_selected.classList.add('selected');\n\t\t\t\tbreak;\n\t\t\tcase 'drawflow-delete':\n\t\t\t\tif (this.node_selected) {\n\t\t\t\t\tthis.removeNodeId(this.node_selected.id);\n\t\t\t\t}\n\n\t\t\t\tif (this.connection_selected) {\n\t\t\t\t\tthis.removeConnection();\n\t\t\t\t}\n\n\t\t\t\tif (this.node_selected != null) {\n\t\t\t\t\tthis.node_selected.classList.remove('selected');\n\t\t\t\t\tthis.node_selected = null;\n\t\t\t\t\tthis.dispatch('nodeUnselected', true);\n\t\t\t\t}\n\t\t\t\tif (this.connection_selected != null) {\n\t\t\t\t\tthis.connection_selected.classList.remove('selected');\n\t\t\t\t\tthis.removeReouteConnectionSelected();\n\t\t\t\t\tthis.connection_selected = null;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\t\tif (e.type === 'touchstart') {\n\t\t\tthis.pos_x = e.touches[0].clientX;\n\t\t\tthis.pos_x_start = e.touches[0].clientX;\n\t\t\tthis.pos_y = e.touches[0].clientY;\n\t\t\tthis.pos_y_start = e.touches[0].clientY;\n\t\t\tthis.mouse_x = e.touches[0].clientX;\n\t\t\tthis.mouse_y = e.touches[0].clientY;\n\t\t} else {\n\t\t\tthis.pos_x = e.clientX;\n\t\t\tthis.pos_x_start = e.clientX;\n\t\t\tthis.pos_y = e.clientY;\n\t\t\tthis.pos_y_start = e.clientY;\n\t\t}\n\t\tif (['input', 'output', 'main-path'].includes(this.ele_selected?.classList[0])) {\n\t\t\te.preventDefault();\n\t\t}\n\t\tthis.dispatch('clickEnd', e);\n\t}\n\n\tposition(e) {\n\t\tif (e.type === 'touchmove') {\n\t\t\tvar e_pos_x = e.touches[0].clientX;\n\t\t\tvar e_pos_y = e.touches[0].clientY;\n\t\t} else {\n\t\t\tvar e_pos_x = e.clientX;\n\t\t\tvar e_pos_y = e.clientY;\n\t\t}\n\n\t\tif (this.connection) {\n\t\t\tthis.updateConnection(e_pos_x, e_pos_y);\n\t\t}\n\t\tif (this.editor_selected) {\n\t\t\tx = this.canvas_x + -(this.pos_x - e_pos_x);\n\t\t\ty = this.canvas_y + -(this.pos_y - e_pos_y);\n\t\t\tthis.dispatch('translate', { x: x, y: y });\n\t\t\tthis.precanvas.style.transform = 'translate(' + x + 'px, ' + y + 'px) scale(' + this.zoom + ')';\n\t\t}\n\t\tif (this.drag) {\n\t\t\te.preventDefault();\n\t\t\tvar x = ((this.pos_x - e_pos_x) * this.precanvas.clientWidth) / (this.precanvas.clientWidth * this.zoom);\n\t\t\tvar y = ((this.pos_y - e_pos_y) * this.precanvas.clientHeight) / (this.precanvas.clientHeight * this.zoom);\n\t\t\tthis.pos_x = e_pos_x;\n\t\t\tthis.pos_y = e_pos_y;\n\n\t\t\tthis.ele_selected.style.top = this.ele_selected.offsetTop - y + 'px';\n\t\t\tthis.ele_selected.style.left = this.ele_selected.offsetLeft - x + 'px';\n\n\t\t\tthis.drawflow.drawflow[this.module].data[this.ele_selected.id.slice(5)].pos_x = this.ele_selected.offsetLeft - x;\n\t\t\tthis.drawflow.drawflow[this.module].data[this.ele_selected.id.slice(5)].pos_y = this.ele_selected.offsetTop - y;\n\n\t\t\tthis.updateConnectionNodes(this.ele_selected.id);\n\t\t}\n\n\t\tif (this.drag_point) {\n\t\t\tvar x = ((this.pos_x - e_pos_x) * this.precanvas.clientWidth) / (this.precanvas.clientWidth * this.zoom);\n\t\t\tvar y = ((this.pos_y - e_pos_y) * this.precanvas.clientHeight) / (this.precanvas.clientHeight * this.zoom);\n\t\t\tthis.pos_x = e_pos_x;\n\t\t\tthis.pos_y = e_pos_y;\n\n\t\t\tvar pos_x = this.pos_x * (this.precanvas.clientWidth / (this.precanvas.clientWidth * this.zoom)) - this.precanvas.getBoundingClientRect().x * (this.precanvas.clientWidth / (this.precanvas.clientWidth * this.zoom));\n\t\t\tvar pos_y = this.pos_y * (this.precanvas.clientHeight / (this.precanvas.clientHeight * this.zoom)) - this.precanvas.getBoundingClientRect().y * (this.precanvas.clientHeight / (this.precanvas.clientHeight * this.zoom));\n\n\t\t\tthis.ele_selected.setAttributeNS(null, 'cx', pos_x);\n\t\t\tthis.ele_selected.setAttributeNS(null, 'cy', pos_y);\n\n\t\t\tconst nodeUpdate = this.ele_selected.parentElement.classList[2].slice(9);\n\t\t\tconst nodeUpdateIn = this.ele_selected.parentElement.classList[1].slice(13);\n\t\t\tconst output_class = this.ele_selected.parentElement.classList[3];\n\t\t\tconst input_class = this.ele_selected.parentElement.classList[4];\n\n\t\t\tlet numberPointPosition = Array.from(this.ele_selected.parentElement.children).indexOf(this.ele_selected) - 1;\n\n\t\t\tif (this.reroute_fix_curvature) {\n\t\t\t\tconst numberMainPath = this.ele_selected.parentElement.querySelectorAll('.main-path').length - 1;\n\t\t\t\tnumberPointPosition -= numberMainPath;\n\t\t\t\tif (numberPointPosition < 0) {\n\t\t\t\t\tnumberPointPosition = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst nodeId = nodeUpdate.slice(5);\n\t\t\tconst searchConnection = this.drawflow.drawflow[this.module].data[nodeId].outputs[output_class].connections.findIndex(function(item, i) {\n\t\t\t\treturn item.node === nodeUpdateIn && item.output === input_class;\n\t\t\t});\n\n\t\t\tthis.drawflow.drawflow[this.module].data[nodeId].outputs[output_class].connections[searchConnection].points[numberPointPosition] = { pos_x: pos_x, pos_y: pos_y };\n\n\t\t\tconst parentSelected = this.ele_selected.parentElement.classList[2].slice(9);\n\n\t\t\tthis.updateConnectionNodes(parentSelected);\n\t\t}\n\n\t\tif (e.type === 'touchmove') {\n\t\t\tthis.mouse_x = e_pos_x;\n\t\t\tthis.mouse_y = e_pos_y;\n\t\t}\n\t\tthis.dispatch('mouseMove', { x: e_pos_x, y: e_pos_y });\n\t}\n\n\tdragEnd(e) {\n\t\tif (e.type === 'touchend') {\n\t\t\tvar e_pos_x = this.mouse_x;\n\t\t\tvar e_pos_y = this.mouse_y;\n\t\t\tvar ele_last = document.elementFromPoint(e_pos_x, e_pos_y);\n\t\t} else {\n\t\t\tvar e_pos_x = e.clientX;\n\t\t\tvar e_pos_y = e.clientY;\n\t\t\tvar ele_last = e.target;\n\t\t}\n\n\t\tif (this.drag) {\n\t\t\tif (this.pos_x_start != e_pos_x || this.pos_y_start != e_pos_y) {\n\t\t\t\tthis.dispatch('nodeMoved', this.ele_selected.id.slice(5));\n\t\t\t}\n\t\t}\n\n\t\tif (this.drag_point) {\n\t\t\tthis.ele_selected.classList.remove('selected');\n\t\t\tif (this.pos_x_start != e_pos_x || this.pos_y_start != e_pos_y) {\n\t\t\t\tthis.dispatch('rerouteMoved', this.ele_selected.parentElement.classList[2].slice(14));\n\t\t\t}\n\t\t}\n\n\t\tif (this.editor_selected) {\n\t\t\tthis.canvas_x = this.canvas_x + -(this.pos_x - e_pos_x);\n\t\t\tthis.canvas_y = this.canvas_y + -(this.pos_y - e_pos_y);\n\t\t\tthis.editor_selected = false;\n\t\t}\n\t\tif (this.connection === true) {\n\t\t\tif (ele_last.classList[0] === 'input' || (this.force_first_input && (ele_last.closest('.drawflow_content_node') != null || ele_last.classList[0] === 'drawflow-node'))) {\n\t\t\t\tif (this.force_first_input && (ele_last.closest('.drawflow_content_node') != null || ele_last.classList[0] === 'drawflow-node')) {\n\t\t\t\t\tif (ele_last.closest('.drawflow_content_node') != null) {\n\t\t\t\t\t\tvar input_id = ele_last.closest('.drawflow_content_node').parentElement.id;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar input_id = ele_last.id;\n\t\t\t\t\t}\n\t\t\t\t\tif (Object.keys(this.getNodeFromId(input_id.slice(5)).inputs).length === 0) {\n\t\t\t\t\t\tvar input_class = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar input_class = 'input_1';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Fix connection;\n\t\t\t\t\tvar input_id = ele_last.parentElement.parentElement.id;\n\t\t\t\t\tvar input_class = ele_last.classList[1];\n\t\t\t\t}\n\t\t\t\tvar output_id = this.ele_selected.parentElement.parentElement.id;\n\t\t\t\tvar output_class = this.ele_selected.classList[1];\n\n\t\t\t\tif (output_id !== input_id && input_class !== false) {\n\t\t\t\t\tif (this.container.querySelectorAll('.connection.node_in_' + input_id + '.node_out_' + output_id + '.' + output_class + '.' + input_class).length === 0) {\n\t\t\t\t\t\t// Conection no exist save connection\n\n\t\t\t\t\t\tthis.connection_ele.classList.add('node_in_' + input_id);\n\t\t\t\t\t\tthis.connection_ele.classList.add('node_out_' + output_id);\n\t\t\t\t\t\tthis.connection_ele.classList.add(output_class);\n\t\t\t\t\t\tthis.connection_ele.classList.add(input_class);\n\t\t\t\t\t\tvar id_input = input_id.slice(5);\n\t\t\t\t\t\tvar id_output = output_id.slice(5);\n\n\t\t\t\t\t\tthis.drawflow.drawflow[this.module].data[id_output].outputs[output_class].connections.push({ node: id_input, output: input_class });\n\t\t\t\t\t\tthis.drawflow.drawflow[this.module].data[id_input].inputs[input_class].connections.push({ node: id_output, input: output_class });\n\t\t\t\t\t\tthis.updateConnectionNodes('node-' + id_output);\n\t\t\t\t\t\tthis.updateConnectionNodes('node-' + id_input);\n\t\t\t\t\t\tthis.dispatch('connectionCreated', { output_id: id_output, input_id: id_input, output_class: output_class, input_class: input_class });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.dispatch('connectionCancel', true);\n\t\t\t\t\t\tthis.connection_ele.remove();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.connection_ele = null;\n\t\t\t\t} else {\n\t\t\t\t\t// Connection exists Remove Connection;\n\t\t\t\t\tthis.dispatch('connectionCancel', true);\n\t\t\t\t\tthis.connection_ele.remove();\n\t\t\t\t\tthis.connection_ele = null;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Remove Connection;\n\t\t\t\tthis.dispatch('connectionCancel', true);\n\t\t\t\tthis.connection_ele.remove();\n\t\t\t\tthis.connection_ele = null;\n\t\t\t}\n\t\t}\n\n\t\tthis.drag = false;\n\t\tthis.drag_point = false;\n\t\tthis.connection = false;\n\t\tthis.ele_selected = null;\n\t\tthis.editor_selected = false;\n\n\t\tthis.dispatch('mouseUp', e);\n\t}\n\tcontextmenu(e) {\n\t\tthis.dispatch('contextmenu', e);\n\t\te.preventDefault();\n\t\tif (this.editor_mode === 'fixed' || this.editor_mode === 'view') {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.precanvas.getElementsByClassName('drawflow-delete').length) {\n\t\t\tthis.precanvas.getElementsByClassName('drawflow-delete')[0].remove();\n\t\t}\n\t\tif (this.node_selected || this.connection_selected) {\n\t\t\tvar deletebox = document.createElement('div');\n\t\t\tdeletebox.classList.add('drawflow-delete');\n\t\t\tdeletebox.innerHTML = 'x';\n\t\t\tif (this.node_selected) {\n\t\t\t\tthis.node_selected.appendChild(deletebox);\n\t\t\t}\n\t\t\tif (this.connection_selected && this.connection_selected.parentElement.classList.length > 1) {\n\t\t\t\tdeletebox.style.top = e.clientY * (this.precanvas.clientHeight / (this.precanvas.clientHeight * this.zoom)) - this.precanvas.getBoundingClientRect().y * (this.precanvas.clientHeight / (this.precanvas.clientHeight * this.zoom)) + 'px';\n\t\t\t\tdeletebox.style.left = e.clientX * (this.precanvas.clientWidth / (this.precanvas.clientWidth * this.zoom)) - this.precanvas.getBoundingClientRect().x * (this.precanvas.clientWidth / (this.precanvas.clientWidth * this.zoom)) + 'px';\n\n\t\t\t\tthis.precanvas.appendChild(deletebox);\n\t\t\t}\n\t\t}\n\t}\n\tcontextmenuDel() {\n\t\tif (this.precanvas.getElementsByClassName('drawflow-delete').length) {\n\t\t\tthis.precanvas.getElementsByClassName('drawflow-delete')[0].remove();\n\t\t}\n\t}\n\n\tkey(e) {\n\t\tthis.dispatch('keydown', e);\n\t\tif (this.editor_mode === 'fixed' || this.editor_mode === 'view') {\n\t\t\treturn false;\n\t\t}\n\t\tif (e.key === 'Delete' || (e.key === 'Backspace' && e.metaKey)) {\n\t\t\tif (this.node_selected != null) {\n\t\t\t\tif (this.first_click.tagName !== 'INPUT' && this.first_click.tagName !== 'TEXTAREA' && this.first_click.hasAttribute('contenteditable') !== true) {\n\t\t\t\t\tthis.removeNodeId(this.node_selected.id);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.connection_selected != null) {\n\t\t\t\tthis.removeConnection();\n\t\t\t}\n\t\t}\n\t}\n\n\tzoom_enter(event, delta) {\n\t\tif (event.ctrlKey) {\n\t\t\tevent.preventDefault();\n\t\t\tif (event.deltaY > 0) {\n\t\t\t\t// Zoom Out\n\t\t\t\tthis.zoom_out();\n\t\t\t} else {\n\t\t\t\t// Zoom In\n\t\t\t\tthis.zoom_in();\n\t\t\t}\n\t\t}\n\t}\n\tzoom_refresh() {\n\t\tthis.dispatch('zoom', this.zoom);\n\t\tthis.canvas_x = (this.canvas_x / this.zoom_last_value) * this.zoom;\n\t\tthis.canvas_y = (this.canvas_y / this.zoom_last_value) * this.zoom;\n\t\tthis.zoom_last_value = this.zoom;\n\t\tthis.precanvas.style.transform = 'translate(' + this.canvas_x + 'px, ' + this.canvas_y + 'px) scale(' + this.zoom + ')';\n\t}\n\tzoom_in() {\n\t\tif (this.zoom < this.zoom_max) {\n\t\t\tthis.zoom += this.zoom_value;\n\t\t\tthis.zoom_refresh();\n\t\t}\n\t}\n\tzoom_out() {\n\t\tif (this.zoom > this.zoom_min) {\n\t\t\tthis.zoom -= this.zoom_value;\n\t\t\tthis.zoom_refresh();\n\t\t}\n\t}\n\tzoom_reset() {\n\t\tif (this.zoom != 1) {\n\t\t\tthis.zoom = 1;\n\t\t\tthis.zoom_refresh();\n\t\t}\n\t}\n\n\tcreateCurvature(start_pos_x, start_pos_y, end_pos_x, end_pos_y, curvature_value, type) {\n\t\tvar line_x = start_pos_x;\n\t\tvar line_y = start_pos_y;\n\t\tvar x = end_pos_x;\n\t\tvar y = end_pos_y;\n\t\tvar curvature = curvature_value;\n\t\t//type openclose open close other\n\t\tswitch (type) {\n\t\t\tcase 'open':\n\t\t\t\tif (start_pos_x >= end_pos_x) {\n\t\t\t\t\tvar hx1 = line_x + Math.abs(x - line_x) * curvature;\n\t\t\t\t\tvar hx2 = x - Math.abs(x - line_x) * (curvature * -1);\n\t\t\t\t} else {\n\t\t\t\t\tvar hx1 = line_x + Math.abs(x - line_x) * curvature;\n\t\t\t\t\tvar hx2 = x - Math.abs(x - line_x) * curvature;\n\t\t\t\t}\n\t\t\t\treturn ' M ' + line_x + ' ' + line_y + ' C ' + hx1 + ' ' + line_y + ' ' + hx2 + ' ' + y + ' ' + x + '  ' + y;\n\n\t\t\t\tbreak;\n\t\t\tcase 'close':\n\t\t\t\tif (start_pos_x >= end_pos_x) {\n\t\t\t\t\tvar hx1 = line_x + Math.abs(x - line_x) * (curvature * -1);\n\t\t\t\t\tvar hx2 = x - Math.abs(x - line_x) * curvature;\n\t\t\t\t} else {\n\t\t\t\t\tvar hx1 = line_x + Math.abs(x - line_x) * curvature;\n\t\t\t\t\tvar hx2 = x - Math.abs(x - line_x) * curvature;\n\t\t\t\t}\n\t\t\t\treturn ' M ' + line_x + ' ' + line_y + ' C ' + hx1 + ' ' + line_y + ' ' + hx2 + ' ' + y + ' ' + x + '  ' + y;\n\t\t\t\tbreak;\n\t\t\tcase 'other':\n\t\t\t\tif (start_pos_x >= end_pos_x) {\n\t\t\t\t\tvar hx1 = line_x + Math.abs(x - line_x) * (curvature * -1);\n\t\t\t\t\tvar hx2 = x - Math.abs(x - line_x) * (curvature * -1);\n\t\t\t\t} else {\n\t\t\t\t\tvar hx1 = line_x + Math.abs(x - line_x) * curvature;\n\t\t\t\t\tvar hx2 = x - Math.abs(x - line_x) * curvature;\n\t\t\t\t}\n\t\t\t\treturn ' M ' + line_x + ' ' + line_y + ' C ' + hx1 + ' ' + line_y + ' ' + hx2 + ' ' + y + ' ' + x + '  ' + y;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tvar hx1 = line_x + Math.abs(x - line_x) * curvature;\n\t\t\t\tvar hx2 = x - Math.abs(x - line_x) * curvature;\n\n\t\t\t\treturn ' M ' + line_x + ' ' + line_y + ' C ' + hx1 + ' ' + line_y + ' ' + hx2 + ' ' + y + ' ' + x + '  ' + y;\n\t\t}\n\t}\n\n\tdrawConnection(ele) {\n\t\tvar connection = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t\tthis.connection_ele = connection;\n\t\tvar path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\t\tpath.classList.add('main-path');\n\t\tpath.setAttributeNS(null, 'd', '');\n\t\t// path.innerHTML = 'a';\n\t\tconnection.classList.add('connection');\n\t\tconnection.appendChild(path);\n\t\tthis.precanvas.appendChild(connection);\n\t\tvar id_output = ele.parentElement.parentElement.id.slice(5);\n\t\tvar output_class = ele.classList[1];\n\t\tthis.dispatch('connectionStart', { output_id: id_output, output_class: output_class });\n\t}\n\n\tupdateConnection(eX, eY) {\n\t\tconst precanvas = this.precanvas;\n\t\tconst zoom = this.zoom;\n\t\tlet precanvasWitdhZoom = precanvas.clientWidth / (precanvas.clientWidth * zoom);\n\t\tprecanvasWitdhZoom = precanvasWitdhZoom || 0;\n\t\tlet precanvasHeightZoom = precanvas.clientHeight / (precanvas.clientHeight * zoom);\n\t\tprecanvasHeightZoom = precanvasHeightZoom || 0;\n\t\tvar path = this.connection_ele.children[0];\n\n\t\tvar line_x = this.ele_selected.offsetWidth / 2 + (this.ele_selected.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom;\n\t\tvar line_y = this.ele_selected.offsetHeight / 2 + (this.ele_selected.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom;\n\n\t\tvar x = eX * (this.precanvas.clientWidth / (this.precanvas.clientWidth * this.zoom)) - this.precanvas.getBoundingClientRect().x * (this.precanvas.clientWidth / (this.precanvas.clientWidth * this.zoom));\n\t\tvar y = eY * (this.precanvas.clientHeight / (this.precanvas.clientHeight * this.zoom)) - this.precanvas.getBoundingClientRect().y * (this.precanvas.clientHeight / (this.precanvas.clientHeight * this.zoom));\n\n\t\tvar curvature = this.curvature;\n\t\tvar lineCurve = this.createCurvature(line_x, line_y, x, y, curvature, 'openclose');\n\t\tpath.setAttributeNS(null, 'd', lineCurve);\n\t}\n\n\taddConnection(id_output, id_input, output_class, input_class) {\n\t\tvar nodeOneModule = this.getModuleFromNodeId(id_output);\n\t\tvar nodeTwoModule = this.getModuleFromNodeId(id_input);\n\t\tif (nodeOneModule === nodeTwoModule) {\n\t\t\tvar dataNode = this.getNodeFromId(id_output);\n\t\t\tvar exist = false;\n\t\t\tfor (var checkOutput in dataNode.outputs[output_class].connections) {\n\t\t\t\tvar connectionSearch = dataNode.outputs[output_class].connections[checkOutput];\n\t\t\t\tif (connectionSearch.node == id_input && connectionSearch.output == input_class) {\n\t\t\t\t\texist = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Check connection exist\n\t\t\tif (exist === false) {\n\t\t\t\t//Create Connection\n\t\t\t\tthis.drawflow.drawflow[nodeOneModule].data[id_output].outputs[output_class].connections.push({ node: id_input.toString(), output: input_class });\n\t\t\t\tthis.drawflow.drawflow[nodeOneModule].data[id_input].inputs[input_class].connections.push({ node: id_output.toString(), input: output_class });\n\n\t\t\t\tif (this.module === nodeOneModule) {\n\t\t\t\t\t//Draw connection\n\t\t\t\t\tvar connection = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t\t\t\t\tvar path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\t\t\t\t\tpath.classList.add('main-path');\n\t\t\t\t\tpath.setAttributeNS(null, 'd', '');\n\t\t\t\t\t// path.innerHTML = 'a';\n\t\t\t\t\tconnection.classList.add('connection');\n\t\t\t\t\tconnection.classList.add('node_in_node-' + id_input);\n\t\t\t\t\tconnection.classList.add('node_out_node-' + id_output);\n\t\t\t\t\tconnection.classList.add(output_class);\n\t\t\t\t\tconnection.classList.add(input_class);\n\t\t\t\t\tconnection.appendChild(path);\n\t\t\t\t\tthis.precanvas.appendChild(connection);\n\t\t\t\t\tthis.updateConnectionNodes('node-' + id_output);\n\t\t\t\t\tthis.updateConnectionNodes('node-' + id_input);\n\t\t\t\t}\n\n\t\t\t\tthis.dispatch('connectionCreated', { output_id: id_output, input_id: id_input, output_class: output_class, input_class: input_class });\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateConnectionNodes(id) {\n\t\t// Aqu nos quedamos;\n\t\tconst idSearch = 'node_in_' + id;\n\t\tconst idSearchOut = 'node_out_' + id;\n\t\tvar line_path = this.line_path / 2;\n\t\tconst container = this.container;\n\t\tconst precanvas = this.precanvas;\n\t\tconst curvature = this.curvature;\n\t\tconst createCurvature = this.createCurvature;\n\t\tconst reroute_curvature = this.reroute_curvature;\n\t\tconst reroute_curvature_start_end = this.reroute_curvature_start_end;\n\t\tconst reroute_fix_curvature = this.reroute_fix_curvature;\n\t\tconst rerouteWidth = this.reroute_width;\n\t\tconst zoom = this.zoom;\n\t\tlet precanvasWitdhZoom = precanvas.clientWidth / (precanvas.clientWidth * zoom);\n\t\tprecanvasWitdhZoom = precanvasWitdhZoom || 0;\n\t\tlet precanvasHeightZoom = precanvas.clientHeight / (precanvas.clientHeight * zoom);\n\t\tprecanvasHeightZoom = precanvasHeightZoom || 0;\n\n\t\tconst elemsOut = container.querySelectorAll(`.${idSearchOut}`);\n\n\t\tObject.keys(elemsOut).map(function(item, index) {\n\t\t\tif (elemsOut[item].querySelector('.point') === null) {\n\t\t\t\tvar elemtsearchId_out = container.querySelector(`#${id}`);\n\n\t\t\t\tvar id_search = elemsOut[item].classList[1].replace('node_in_', '');\n\t\t\t\tvar elemtsearchId = container.querySelector(`#${id_search}`);\n\n\t\t\t\tvar elemtsearch = elemtsearchId.querySelectorAll('.' + elemsOut[item].classList[4])[0];\n\n\t\t\t\tvar eX = elemtsearch.offsetWidth / 2 + (elemtsearch.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom;\n\t\t\t\tvar eY = elemtsearch.offsetHeight / 2 + (elemtsearch.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom;\n\n\t\t\t\tvar elemtsearchOut = elemtsearchId_out.querySelectorAll('.' + elemsOut[item].classList[3])[0];\n\n\t\t\t\tvar line_x = elemtsearchOut.offsetWidth / 2 + (elemtsearchOut.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom;\n\t\t\t\tvar line_y = elemtsearchOut.offsetHeight / 2 + (elemtsearchOut.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom;\n\n\t\t\t\tvar x = eX;\n\t\t\t\tvar y = eY;\n\n\t\t\t\tconst lineCurve = createCurvature(line_x, line_y, x, y, curvature, 'openclose');\n\t\t\t\telemsOut[item].children[0].setAttributeNS(null, 'd', lineCurve);\n\t\t\t} else {\n\t\t\t\tconst points = elemsOut[item].querySelectorAll('.point');\n\t\t\t\tlet linecurve = '';\n\t\t\t\tconst reoute_fix = [];\n\t\t\t\tpoints.forEach((item, i) => {\n\t\t\t\t\tif (i === 0 && points.length - 1 === 0) {\n\t\t\t\t\t\tvar elemtsearchId_out = container.querySelector(`#${id}`);\n\t\t\t\t\t\tvar elemtsearch = item;\n\n\t\t\t\t\t\tvar eX = (elemtsearch.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom + rerouteWidth;\n\t\t\t\t\t\tvar eY = (elemtsearch.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom + rerouteWidth;\n\n\t\t\t\t\t\tvar elemtsearchOut = elemtsearchId_out.querySelectorAll('.' + item.parentElement.classList[3])[0];\n\t\t\t\t\t\tvar line_x = elemtsearchOut.offsetWidth / 2 + (elemtsearchOut.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom;\n\t\t\t\t\t\tvar line_y = elemtsearchOut.offsetHeight / 2 + (elemtsearchOut.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom;\n\t\t\t\t\t\tvar x = eX;\n\t\t\t\t\t\tvar y = eY;\n\n\t\t\t\t\t\tvar lineCurveSearch = createCurvature(line_x, line_y, x, y, reroute_curvature_start_end, 'open');\n\t\t\t\t\t\tlinecurve += lineCurveSearch;\n\t\t\t\t\t\treoute_fix.push(lineCurveSearch);\n\n\t\t\t\t\t\tvar elemtsearchId_out = item;\n\t\t\t\t\t\tvar id_search = item.parentElement.classList[1].replace('node_in_', '');\n\t\t\t\t\t\tvar elemtsearchId = container.querySelector(`#${id_search}`);\n\t\t\t\t\t\tvar elemtsearch = elemtsearchId.querySelectorAll('.' + item.parentElement.classList[4])[0];\n\n\t\t\t\t\t\tvar elemtsearchIn = elemtsearchId.querySelectorAll('.' + item.parentElement.classList[4])[0];\n\t\t\t\t\t\tvar eX = elemtsearchIn.offsetWidth / 2 + (elemtsearchIn.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom;\n\t\t\t\t\t\tvar eY = elemtsearchIn.offsetHeight / 2 + (elemtsearchIn.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom;\n\n\t\t\t\t\t\tvar line_x = (elemtsearchId_out.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom + rerouteWidth;\n\t\t\t\t\t\tvar line_y = (elemtsearchId_out.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom + rerouteWidth;\n\t\t\t\t\t\tvar x = eX;\n\t\t\t\t\t\tvar y = eY;\n\n\t\t\t\t\t\tvar lineCurveSearch = createCurvature(line_x, line_y, x, y, reroute_curvature_start_end, 'close');\n\t\t\t\t\t\tlinecurve += lineCurveSearch;\n\t\t\t\t\t\treoute_fix.push(lineCurveSearch);\n\t\t\t\t\t} else if (i === 0) {\n\t\t\t\t\t\tvar elemtsearchId_out = container.querySelector(`#${id}`);\n\t\t\t\t\t\tvar elemtsearch = item;\n\n\t\t\t\t\t\tvar eX = (elemtsearch.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom + rerouteWidth;\n\t\t\t\t\t\tvar eY = (elemtsearch.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom + rerouteWidth;\n\n\t\t\t\t\t\tvar elemtsearchOut = elemtsearchId_out.querySelectorAll('.' + item.parentElement.classList[3])[0];\n\t\t\t\t\t\tvar line_x = elemtsearchOut.offsetWidth / 2 + (elemtsearchOut.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom;\n\t\t\t\t\t\tvar line_y = elemtsearchOut.offsetHeight / 2 + (elemtsearchOut.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom;\n\n\t\t\t\t\t\tvar x = eX;\n\t\t\t\t\t\tvar y = eY;\n\n\t\t\t\t\t\tvar lineCurveSearch = createCurvature(line_x, line_y, x, y, reroute_curvature_start_end, 'open');\n\t\t\t\t\t\tlinecurve += lineCurveSearch;\n\t\t\t\t\t\treoute_fix.push(lineCurveSearch);\n\n\t\t\t\t\t\t// SECOND\n\t\t\t\t\t\tvar elemtsearchId_out = item;\n\t\t\t\t\t\tvar elemtsearch = points[i + 1];\n\n\t\t\t\t\t\tvar eX = (elemtsearch.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom + rerouteWidth;\n\t\t\t\t\t\tvar eY = (elemtsearch.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom + rerouteWidth;\n\t\t\t\t\t\tvar line_x = (elemtsearchId_out.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom + rerouteWidth;\n\t\t\t\t\t\tvar line_y = (elemtsearchId_out.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom + rerouteWidth;\n\t\t\t\t\t\tvar x = eX;\n\t\t\t\t\t\tvar y = eY;\n\n\t\t\t\t\t\tvar lineCurveSearch = createCurvature(line_x, line_y, x, y, reroute_curvature, 'other');\n\t\t\t\t\t\tlinecurve += lineCurveSearch;\n\t\t\t\t\t\treoute_fix.push(lineCurveSearch);\n\t\t\t\t\t} else if (i === points.length - 1) {\n\t\t\t\t\t\tvar elemtsearchId_out = item;\n\n\t\t\t\t\t\tvar id_search = item.parentElement.classList[1].replace('node_in_', '');\n\t\t\t\t\t\tvar elemtsearchId = container.querySelector(`#${id_search}`);\n\t\t\t\t\t\tvar elemtsearch = elemtsearchId.querySelectorAll('.' + item.parentElement.classList[4])[0];\n\n\t\t\t\t\t\tvar elemtsearchIn = elemtsearchId.querySelectorAll('.' + item.parentElement.classList[4])[0];\n\t\t\t\t\t\tvar eX = elemtsearchIn.offsetWidth / 2 + (elemtsearchIn.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom;\n\t\t\t\t\t\tvar eY = elemtsearchIn.offsetHeight / 2 + (elemtsearchIn.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom;\n\t\t\t\t\t\tvar line_x = (elemtsearchId_out.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * (precanvas.clientWidth / (precanvas.clientWidth * zoom)) + rerouteWidth;\n\t\t\t\t\t\tvar line_y = (elemtsearchId_out.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * (precanvas.clientHeight / (precanvas.clientHeight * zoom)) + rerouteWidth;\n\t\t\t\t\t\tvar x = eX;\n\t\t\t\t\t\tvar y = eY;\n\n\t\t\t\t\t\tvar lineCurveSearch = createCurvature(line_x, line_y, x, y, reroute_curvature_start_end, 'close');\n\t\t\t\t\t\tlinecurve += lineCurveSearch;\n\t\t\t\t\t\treoute_fix.push(lineCurveSearch);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar elemtsearchId_out = item;\n\t\t\t\t\t\tvar elemtsearch = points[i + 1];\n\n\t\t\t\t\t\tvar eX = (elemtsearch.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * (precanvas.clientWidth / (precanvas.clientWidth * zoom)) + rerouteWidth;\n\t\t\t\t\t\tvar eY = (elemtsearch.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * (precanvas.clientHeight / (precanvas.clientHeight * zoom)) + rerouteWidth;\n\t\t\t\t\t\tvar line_x = (elemtsearchId_out.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * (precanvas.clientWidth / (precanvas.clientWidth * zoom)) + rerouteWidth;\n\t\t\t\t\t\tvar line_y = (elemtsearchId_out.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * (precanvas.clientHeight / (precanvas.clientHeight * zoom)) + rerouteWidth;\n\t\t\t\t\t\tvar x = eX;\n\t\t\t\t\t\tvar y = eY;\n\n\t\t\t\t\t\tvar lineCurveSearch = createCurvature(line_x, line_y, x, y, reroute_curvature, 'other');\n\t\t\t\t\t\tlinecurve += lineCurveSearch;\n\t\t\t\t\t\treoute_fix.push(lineCurveSearch);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (reroute_fix_curvature) {\n\t\t\t\t\treoute_fix.forEach((itempath, i) => {\n\t\t\t\t\t\telemsOut[item].children[i].setAttributeNS(null, 'd', itempath);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\telemsOut[item].children[0].setAttributeNS(null, 'd', linecurve);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst elems = container.querySelectorAll(`.${idSearch}`);\n\t\tObject.keys(elems).map(function(item, index) {\n\t\t\tif (elems[item].querySelector('.point') === null) {\n\t\t\t\tvar elemtsearchId_in = container.querySelector(`#${id}`);\n\n\t\t\t\tvar id_search = elems[item].classList[2].replace('node_out_', '');\n\t\t\t\tvar elemtsearchId = container.querySelector(`#${id_search}`);\n\t\t\t\tvar elemtsearch = elemtsearchId.querySelectorAll('.' + elems[item].classList[3])[0];\n\n\t\t\t\tvar line_x = elemtsearch.offsetWidth / 2 + (elemtsearch.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom;\n\t\t\t\tvar line_y = elemtsearch.offsetHeight / 2 + (elemtsearch.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom;\n\n\t\t\t\tvar elemtsearchId_in = elemtsearchId_in.querySelectorAll('.' + elems[item].classList[4])[0];\n\t\t\t\tvar x = elemtsearchId_in.offsetWidth / 2 + (elemtsearchId_in.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom;\n\t\t\t\tvar y = elemtsearchId_in.offsetHeight / 2 + (elemtsearchId_in.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom;\n\n\t\t\t\tconst lineCurve = createCurvature(line_x, line_y, x, y, curvature, 'openclose');\n\t\t\t\telems[item].children[0].setAttributeNS(null, 'd', lineCurve);\n\t\t\t} else {\n\t\t\t\tconst points = elems[item].querySelectorAll('.point');\n\t\t\t\tlet linecurve = '';\n\t\t\t\tconst reoute_fix = [];\n\t\t\t\tpoints.forEach((item, i) => {\n\t\t\t\t\tif (i === 0 && points.length - 1 === 0) {\n\t\t\t\t\t\tvar elemtsearchId_out = container.querySelector(`#${id}`);\n\t\t\t\t\t\tvar elemtsearch = item;\n\n\t\t\t\t\t\tvar line_x = (elemtsearch.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom + rerouteWidth;\n\t\t\t\t\t\tvar line_y = (elemtsearch.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom + rerouteWidth;\n\n\t\t\t\t\t\tvar elemtsearchIn = elemtsearchId_out.querySelectorAll('.' + item.parentElement.classList[4])[0];\n\t\t\t\t\t\tvar eX = elemtsearchIn.offsetWidth / 2 + (elemtsearchIn.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom;\n\t\t\t\t\t\tvar eY = elemtsearchIn.offsetHeight / 2 + (elemtsearchIn.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom;\n\n\t\t\t\t\t\tvar x = eX;\n\t\t\t\t\t\tvar y = eY;\n\n\t\t\t\t\t\tvar lineCurveSearch = createCurvature(line_x, line_y, x, y, reroute_curvature_start_end, 'close');\n\t\t\t\t\t\tlinecurve += lineCurveSearch;\n\t\t\t\t\t\treoute_fix.push(lineCurveSearch);\n\n\t\t\t\t\t\tvar elemtsearchId_out = item;\n\t\t\t\t\t\tvar id_search = item.parentElement.classList[2].replace('node_out_', '');\n\t\t\t\t\t\tvar elemtsearchId = container.querySelector(`#${id_search}`);\n\t\t\t\t\t\tvar elemtsearch = elemtsearchId.querySelectorAll('.' + item.parentElement.classList[3])[0];\n\n\t\t\t\t\t\tvar elemtsearchOut = elemtsearchId.querySelectorAll('.' + item.parentElement.classList[3])[0];\n\t\t\t\t\t\tvar line_x = elemtsearchOut.offsetWidth / 2 + (elemtsearchOut.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom;\n\t\t\t\t\t\tvar line_y = elemtsearchOut.offsetHeight / 2 + (elemtsearchOut.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom;\n\n\t\t\t\t\t\tvar eX = (elemtsearchId_out.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom + rerouteWidth;\n\t\t\t\t\t\tvar eY = (elemtsearchId_out.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom + rerouteWidth;\n\t\t\t\t\t\tvar x = eX;\n\t\t\t\t\t\tvar y = eY;\n\n\t\t\t\t\t\tvar lineCurveSearch = createCurvature(line_x, line_y, x, y, reroute_curvature_start_end, 'open');\n\t\t\t\t\t\tlinecurve += lineCurveSearch;\n\t\t\t\t\t\treoute_fix.push(lineCurveSearch);\n\t\t\t\t\t} else if (i === 0) {\n\t\t\t\t\t\t// FIRST\n\t\t\t\t\t\tvar elemtsearchId_out = item;\n\t\t\t\t\t\tvar id_search = item.parentElement.classList[2].replace('node_out_', '');\n\t\t\t\t\t\tvar elemtsearchId = container.querySelector(`#${id_search}`);\n\t\t\t\t\t\tvar elemtsearch = elemtsearchId.querySelectorAll('.' + item.parentElement.classList[3])[0];\n\t\t\t\t\t\tvar elemtsearchOut = elemtsearchId.querySelectorAll('.' + item.parentElement.classList[3])[0];\n\t\t\t\t\t\tvar line_x = elemtsearchOut.offsetWidth / 2 + (elemtsearchOut.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom;\n\t\t\t\t\t\tvar line_y = elemtsearchOut.offsetHeight / 2 + (elemtsearchOut.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom;\n\n\t\t\t\t\t\tvar eX = (elemtsearchId_out.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom + rerouteWidth;\n\t\t\t\t\t\tvar eY = (elemtsearchId_out.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom + rerouteWidth;\n\t\t\t\t\t\tvar x = eX;\n\t\t\t\t\t\tvar y = eY;\n\n\t\t\t\t\t\tvar lineCurveSearch = createCurvature(line_x, line_y, x, y, reroute_curvature_start_end, 'open');\n\t\t\t\t\t\tlinecurve += lineCurveSearch;\n\t\t\t\t\t\treoute_fix.push(lineCurveSearch);\n\n\t\t\t\t\t\t// SECOND\n\t\t\t\t\t\tvar elemtsearchId_out = item;\n\t\t\t\t\t\tvar elemtsearch = points[i + 1];\n\n\t\t\t\t\t\tvar eX = (elemtsearch.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom + rerouteWidth;\n\t\t\t\t\t\tvar eY = (elemtsearch.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom + rerouteWidth;\n\t\t\t\t\t\tvar line_x = (elemtsearchId_out.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom + rerouteWidth;\n\t\t\t\t\t\tvar line_y = (elemtsearchId_out.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom + rerouteWidth;\n\t\t\t\t\t\tvar x = eX;\n\t\t\t\t\t\tvar y = eY;\n\n\t\t\t\t\t\tvar lineCurveSearch = createCurvature(line_x, line_y, x, y, reroute_curvature, 'other');\n\t\t\t\t\t\tlinecurve += lineCurveSearch;\n\t\t\t\t\t\treoute_fix.push(lineCurveSearch);\n\t\t\t\t\t} else if (i === points.length - 1) {\n\t\t\t\t\t\tvar elemtsearchId_out = item;\n\n\t\t\t\t\t\tvar id_search = item.parentElement.classList[1].replace('node_in_', '');\n\t\t\t\t\t\tvar elemtsearchId = container.querySelector(`#${id_search}`);\n\t\t\t\t\t\tvar elemtsearch = elemtsearchId.querySelectorAll('.' + item.parentElement.classList[4])[0];\n\n\t\t\t\t\t\tvar elemtsearchIn = elemtsearchId.querySelectorAll('.' + item.parentElement.classList[4])[0];\n\t\t\t\t\t\tvar eX = elemtsearchIn.offsetWidth / 2 + (elemtsearchIn.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom;\n\t\t\t\t\t\tvar eY = elemtsearchIn.offsetHeight / 2 + (elemtsearchIn.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom;\n\n\t\t\t\t\t\tvar line_x = (elemtsearchId_out.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom + rerouteWidth;\n\t\t\t\t\t\tvar line_y = (elemtsearchId_out.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom + rerouteWidth;\n\t\t\t\t\t\tvar x = eX;\n\t\t\t\t\t\tvar y = eY;\n\n\t\t\t\t\t\tvar lineCurveSearch = createCurvature(line_x, line_y, x, y, reroute_curvature_start_end, 'close');\n\t\t\t\t\t\tlinecurve += lineCurveSearch;\n\t\t\t\t\t\treoute_fix.push(lineCurveSearch);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar elemtsearchId_out = item;\n\t\t\t\t\t\tvar elemtsearch = points[i + 1];\n\n\t\t\t\t\t\tvar eX = (elemtsearch.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom + rerouteWidth;\n\t\t\t\t\t\tvar eY = (elemtsearch.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom + rerouteWidth;\n\t\t\t\t\t\tvar line_x = (elemtsearchId_out.getBoundingClientRect().x - precanvas.getBoundingClientRect().x) * precanvasWitdhZoom + rerouteWidth;\n\t\t\t\t\t\tvar line_y = (elemtsearchId_out.getBoundingClientRect().y - precanvas.getBoundingClientRect().y) * precanvasHeightZoom + rerouteWidth;\n\t\t\t\t\t\tvar x = eX;\n\t\t\t\t\t\tvar y = eY;\n\n\t\t\t\t\t\tvar lineCurveSearch = createCurvature(line_x, line_y, x, y, reroute_curvature, 'other');\n\t\t\t\t\t\tlinecurve += lineCurveSearch;\n\t\t\t\t\t\treoute_fix.push(lineCurveSearch);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (reroute_fix_curvature) {\n\t\t\t\t\treoute_fix.forEach((itempath, i) => {\n\t\t\t\t\t\telems[item].children[i].setAttributeNS(null, 'd', itempath);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\telems[item].children[0].setAttributeNS(null, 'd', linecurve);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tdblclick(e) {\n\t\tif (this.connection_selected != null && this.reroute) {\n\t\t\tthis.createReroutePoint(this.connection_selected);\n\t\t}\n\n\t\tif (e.target.classList[0] === 'point') {\n\t\t\tthis.removeReroutePoint(e.target);\n\t\t}\n\t}\n\n\tcreateReroutePoint(ele) {\n\t\tthis.connection_selected.classList.remove('selected');\n\t\tconst nodeUpdate = this.connection_selected.parentElement.classList[2].slice(9);\n\t\tconst nodeUpdateIn = this.connection_selected.parentElement.classList[1].slice(13);\n\t\tconst output_class = this.connection_selected.parentElement.classList[3];\n\t\tconst input_class = this.connection_selected.parentElement.classList[4];\n\t\tthis.connection_selected = null;\n\t\tconst point = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n\t\tpoint.classList.add('point');\n\t\tvar pos_x = this.pos_x * (this.precanvas.clientWidth / (this.precanvas.clientWidth * this.zoom)) - this.precanvas.getBoundingClientRect().x * (this.precanvas.clientWidth / (this.precanvas.clientWidth * this.zoom));\n\t\tvar pos_y = this.pos_y * (this.precanvas.clientHeight / (this.precanvas.clientHeight * this.zoom)) - this.precanvas.getBoundingClientRect().y * (this.precanvas.clientHeight / (this.precanvas.clientHeight * this.zoom));\n\n\t\tpoint.setAttributeNS(null, 'cx', pos_x);\n\t\tpoint.setAttributeNS(null, 'cy', pos_y);\n\t\tpoint.setAttributeNS(null, 'r', this.reroute_width);\n\n\t\tlet position_add_array_point = 0;\n\t\tif (this.reroute_fix_curvature) {\n\t\t\tconst numberPoints = ele.parentElement.querySelectorAll('.main-path').length;\n\t\t\tvar path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\t\t\tpath.classList.add('main-path');\n\t\t\tpath.setAttributeNS(null, 'd', '');\n\n\t\t\tele.parentElement.insertBefore(path, ele.parentElement.children[numberPoints]);\n\t\t\tif (numberPoints === 1) {\n\t\t\t\tele.parentElement.appendChild(point);\n\t\t\t} else {\n\t\t\t\tconst search_point = Array.from(ele.parentElement.children).indexOf(ele);\n\t\t\t\tposition_add_array_point = search_point;\n\t\t\t\tele.parentElement.insertBefore(point, ele.parentElement.children[search_point + numberPoints + 1]);\n\t\t\t}\n\t\t} else {\n\t\t\tele.parentElement.appendChild(point);\n\t\t}\n\n\t\tconst nodeId = nodeUpdate.slice(5);\n\t\tconst searchConnection = this.drawflow.drawflow[this.module].data[nodeId].outputs[output_class].connections.findIndex(function(item, i) {\n\t\t\treturn item.node === nodeUpdateIn && item.output === input_class;\n\t\t});\n\n\t\tif (this.drawflow.drawflow[this.module].data[nodeId].outputs[output_class].connections[searchConnection].points === undefined) {\n\t\t\tthis.drawflow.drawflow[this.module].data[nodeId].outputs[output_class].connections[searchConnection].points = [];\n\t\t}\n\n\t\tif (this.reroute_fix_curvature) {\n\t\t\tif (position_add_array_point > 0 || this.drawflow.drawflow[this.module].data[nodeId].outputs[output_class].connections[searchConnection].points !== []) {\n\t\t\t\tthis.drawflow.drawflow[this.module].data[nodeId].outputs[output_class].connections[searchConnection].points.splice(position_add_array_point, 0, { pos_x: pos_x, pos_y: pos_y });\n\t\t\t} else {\n\t\t\t\tthis.drawflow.drawflow[this.module].data[nodeId].outputs[output_class].connections[searchConnection].points.push({ pos_x: pos_x, pos_y: pos_y });\n\t\t\t}\n\n\t\t\tele.parentElement.querySelectorAll('.main-path').forEach((item, i) => {\n\t\t\t\titem.classList.remove('selected');\n\t\t\t});\n\t\t} else {\n\t\t\tthis.drawflow.drawflow[this.module].data[nodeId].outputs[output_class].connections[searchConnection].points.push({ pos_x: pos_x, pos_y: pos_y });\n\t\t}\n\n\t\tthis.dispatch('addReroute', nodeId);\n\t\tthis.updateConnectionNodes(nodeUpdate);\n\t}\n\n\tremoveReroutePoint(ele) {\n\t\tconst nodeUpdate = ele.parentElement.classList[2].slice(9);\n\t\tconst nodeUpdateIn = ele.parentElement.classList[1].slice(13);\n\t\tconst output_class = ele.parentElement.classList[3];\n\t\tconst input_class = ele.parentElement.classList[4];\n\n\t\tlet numberPointPosition = Array.from(ele.parentElement.children).indexOf(ele);\n\t\tconst nodeId = nodeUpdate.slice(5);\n\t\tconst searchConnection = this.drawflow.drawflow[this.module].data[nodeId].outputs[output_class].connections.findIndex(function(item, i) {\n\t\t\treturn item.node === nodeUpdateIn && item.output === input_class;\n\t\t});\n\n\t\tif (this.reroute_fix_curvature) {\n\t\t\tconst numberMainPath = ele.parentElement.querySelectorAll('.main-path').length;\n\t\t\tele.parentElement.children[numberMainPath - 1].remove();\n\t\t\tnumberPointPosition -= numberMainPath;\n\t\t\tif (numberPointPosition < 0) {\n\t\t\t\tnumberPointPosition = 0;\n\t\t\t}\n\t\t} else {\n\t\t\tnumberPointPosition--;\n\t\t}\n\t\tthis.drawflow.drawflow[this.module].data[nodeId].outputs[output_class].connections[searchConnection].points.splice(numberPointPosition, 1);\n\n\t\tele.remove();\n\t\tthis.dispatch('removeReroute', nodeId);\n\t\tthis.updateConnectionNodes(nodeUpdate);\n\t}\n\n\tregisterNode(name, html, props = null, options = null) {\n\t\tthis.noderegister[name] = { html: html, props: props, options: options };\n\t}\n\n\tgetNodeFromId(id) {\n\t\tvar moduleName = this.getModuleFromNodeId(id);\n\t\tif (moduleName == '') {\n\t\t\treturn {};\n\t\t}\n\n\t\treturn JSON.parse(JSON.stringify(this.drawflow.drawflow[moduleName].data[id]));\n\t}\n\tgetNodesFromName(name) {\n\t\tvar nodes = [];\n\t\tconst editor = this.drawflow.drawflow;\n\t\tObject.keys(editor).map(function(moduleName, index) {\n\t\t\tfor (var node in editor[moduleName].data) {\n\t\t\t\tif (editor[moduleName].data[node].name == name) {\n\t\t\t\t\tnodes.push(editor[moduleName].data[node].id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn nodes;\n\t}\n\n\taddNode(name, num_in, num_out, ele_pos_x, ele_pos_y, classoverride, data, html, typenode = false) {\n\t\tif (this.useuuid) {\n\t\t\tvar newNodeId = this.getUuid();\n\t\t} else {\n\t\t\tvar newNodeId = this.nodeId;\n\t\t}\n\t\tconst parent = document.createElement('div');\n\t\tparent.classList.add('parent-node');\n\n\t\tconst node = document.createElement('div');\n\t\tnode.innerHTML = '';\n\t\tnode.setAttribute('id', 'node-' + newNodeId);\n\t\tnode.classList.add('drawflow-node');\n\t\tif (classoverride != '') {\n\t\t\tnode.classList.add(...classoverride.split(' '));\n\t\t}\n\n\t\tconst inputs = document.createElement('div');\n\t\tinputs.classList.add('inputs');\n\n\t\tconst outputs = document.createElement('div');\n\t\toutputs.classList.add('outputs');\n\n\t\tconst uifm_options = document.createElement('div');\n\t\tuifm_options.classList.add('drawflow_uifm_opt_edit');\n\t\tuifm_options.innerHTML = `\n\t\t<i class=\"fa fa-pencil\" aria-hidden=\"true\"></i>\n\t\t`;\n\n\t\tconst uifm_options_delete = document.createElement('div');\n\t\tuifm_options_delete.classList.add('drawflow_uifm_opt_delete');\n\t\tuifm_options_delete.innerHTML = `\n\t\t <i class=\"fa fa-trash\" aria-hidden=\"true\"></i>\n\t\t`;\n\n\t\tconst json_inputs = {};\n\t\tfor (var x = 0; x < num_in; x++) {\n\t\t\tconst input = document.createElement('div');\n\t\t\tinput.classList.add('input');\n\t\t\tinput.classList.add('input_' + (x + 1));\n\t\t\tjson_inputs['input_' + (x + 1)] = { connections: [] };\n\t\t\tinputs.appendChild(input);\n\t\t}\n\n\t\tconst json_outputs = {};\n\t\tfor (var x = 0; x < num_out; x++) {\n\t\t\tconst output = document.createElement('div');\n\t\t\toutput.classList.add('output');\n\t\t\toutput.classList.add('output_' + (x + 1));\n\t\t\tjson_outputs['output_' + (x + 1)] = { connections: [] };\n\t\t\toutputs.appendChild(output);\n\t\t}\n\n\t\tconst content = document.createElement('div');\n\t\tcontent.classList.add('drawflow_content_node');\n\t\tif (typenode === false) {\n\t\t\tcontent.innerHTML = html;\n\t\t} else if (typenode === true) {\n\t\t\tcontent.appendChild(this.noderegister[html].html.cloneNode(true));\n\t\t} else {\n\t\t\tif (parseInt(this.render.version) === 3) {\n\t\t\t\t//Vue 3\n\t\t\t\tlet wrapper = this.render.h(this.noderegister[html].html, this.noderegister[html].props, this.noderegister[html].options);\n\t\t\t\twrapper.appContext = this.parent;\n\t\t\t\tthis.render.render(wrapper, content);\n\t\t\t} else {\n\t\t\t\t// Vue 2\n\t\t\t\tlet wrapper = new this.render({\n\t\t\t\t\tparent: this.parent,\n\t\t\t\t\trender: h => h(this.noderegister[html].html, { props: this.noderegister[html].props }),\n\t\t\t\t\t...this.noderegister[html].options,\n\t\t\t\t}).$mount();\n\t\t\t\t//\n\t\t\t\tcontent.appendChild(wrapper.$el);\n\t\t\t}\n\t\t}\n\n\t\tObject.entries(data).forEach(function(key, value) {\n\t\t\tif (typeof key[1] === 'object') {\n\t\t\t\tinsertObjectkeys(null, key[0], key[0]);\n\t\t\t} else {\n\t\t\t\tvar elems = content.querySelectorAll('[df-' + key[0] + ']');\n\t\t\t\tfor (var i = 0; i < elems.length; i++) {\n\t\t\t\t\telems[i].value = key[1];\n\t\t\t\t\tif (elems[i].isContentEditable) {\n\t\t\t\t\t\telems[i].innerText = key[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfunction insertObjectkeys(object, name, completname) {\n\t\t\tif (object === null) {\n\t\t\t\tvar object = data[name];\n\t\t\t} else {\n\t\t\t\tvar object = object[name];\n\t\t\t}\n\t\t\tif (object !== null) {\n\t\t\t\tObject.entries(object).forEach(function(key, value) {\n\t\t\t\t\tif (typeof key[1] === 'object') {\n\t\t\t\t\t\tinsertObjectkeys(object, key[0], completname + '-' + key[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar elems = content.querySelectorAll('[df-' + completname + '-' + key[0] + ']');\n\t\t\t\t\t\tfor (var i = 0; i < elems.length; i++) {\n\t\t\t\t\t\t\telems[i].value = key[1];\n\t\t\t\t\t\t\tif (elems[i].isContentEditable) {\n\t\t\t\t\t\t\t\telems[i].innerText = key[1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tnode.appendChild(inputs);\n\t\tnode.appendChild(content);\n\t\tnode.appendChild(outputs);\n\t\tnode.appendChild(uifm_options);\n\t\tnode.appendChild(uifm_options_delete);\n\n\t\tnode.style.top = ele_pos_y + 'px';\n\t\tnode.style.left = ele_pos_x + 'px';\n\t\tparent.appendChild(node);\n\t\tthis.precanvas.appendChild(parent);\n\t\tvar json = {\n\t\t\tid: newNodeId,\n\t\t\tname: name,\n\t\t\tdata: data,\n\t\t\tclass: classoverride,\n\t\t\thtml: html,\n\t\t\ttypenode: typenode,\n\t\t\tinputs: json_inputs,\n\t\t\toutputs: json_outputs,\n\t\t\tpos_x: ele_pos_x,\n\t\t\tpos_y: ele_pos_y,\n\t\t};\n\t\tthis.drawflow.drawflow[this.module].data[newNodeId] = json;\n\t\tthis.dispatch('nodeCreated', newNodeId);\n\t\tif (!this.useuuid) {\n\t\t\tthis.nodeId++;\n\t\t}\n\n\t\tnode.addEventListener('mouseenter', function() {\n\t\t\tthis.querySelector('.drawflow_uifm_opt_edit').style.display = 'block';\n\t\t\tthis.querySelector('.drawflow_uifm_opt_delete').style.display = 'block';\n\t\t});\n\n\t\tnode.addEventListener('mouseleave', function() {\n\t\t\tthis.querySelector('.drawflow_uifm_opt_edit').style.display = 'none';\n\t\t\tthis.querySelector('.drawflow_uifm_opt_delete').style.display = 'none';\n\t\t});\n\t\tconst self = this;\n\t\tdocument.querySelector(`#node-${newNodeId} .drawflow_uifm_opt_edit`).addEventListener('click', function() {\n\t\t\tdocument.querySelectorAll('.drawflow-node').forEach(node => {\n\t\t\t\tif (node.classList.contains('selected')) {\n\t\t\t\t\t// Remove the 'selected' class\n\t\t\t\t\tnode.classList.remove('selected');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tself.selectNode(newNodeId);\n\t\t\tdocument.querySelector('.sfdc-nav-tabs a[href=\"#uiformc-menu-sec1\"]').click();\n\t\t});\n\t\tdocument.querySelector(`#node-${newNodeId} .drawflow_uifm_opt_delete`).addEventListener('click', function() {\n\t\t\tself.selectNode(newNodeId);\n\t\t\tif (self.node_selected) {\n\t\t\t\tself.dispatch('uifmNodeUnselected', data.id);\n\n\t\t\t\tself.removeNodeId(self.node_selected.id);\n\t\t\t}\n\n\t\t\tif (self.connection_selected) {\n\t\t\t\tself.removeConnection();\n\t\t\t}\n\n\t\t\tif (self.node_selected != null) {\n\t\t\t\tself.node_selected.classList.remove('selected');\n\t\t\t\tself.node_selected = null;\n\t\t\t\tself.dispatch('nodeUnselected', true);\n\t\t\t}\n\t\t\tif (self.connection_selected != null) {\n\t\t\t\tself.connection_selected.classList.remove('selected');\n\t\t\t\tself.removeReouteConnectionSelected();\n\t\t\t\tself.connection_selected = null;\n\t\t\t}\n\t\t});\n\t\treturn newNodeId;\n\t}\n\n\taddNodeImport(dataNode, precanvas) {\n\t\tconst parent = document.createElement('div');\n\t\tparent.classList.add('parent-node');\n\n\t\tconst node = document.createElement('div');\n\t\tnode.innerHTML = '';\n\t\tnode.setAttribute('id', 'node-' + dataNode.id);\n\t\tnode.classList.add('drawflow-node');\n\t\tif (dataNode.class != '') {\n\t\t\tnode.classList.add(...dataNode.class.split(' '));\n\t\t}\n\n\t\tconst inputs = document.createElement('div');\n\t\tinputs.classList.add('inputs');\n\n\t\tconst outputs = document.createElement('div');\n\t\toutputs.classList.add('outputs');\n\n\t\tconst uifm_options = document.createElement('div');\n\t\tuifm_options.classList.add('drawflow_uifm_opt_edit');\n\t\tuifm_options.innerHTML = `\n\t\t<i class=\"fa fa-pencil\" aria-hidden=\"true\"></i>\n\t\t`;\n\n\t\tconst uifm_options_delete = document.createElement('div');\n\t\tuifm_options_delete.classList.add('drawflow_uifm_opt_delete');\n\t\tuifm_options_delete.innerHTML = `\n\t\t <i class=\"fa fa-trash\" aria-hidden=\"true\"></i>\n\t\t`;\n\n\t\tObject.keys(dataNode.inputs).map(function(input_item, index) {\n\t\t\tconst input = document.createElement('div');\n\t\t\tinput.classList.add('input');\n\t\t\tinput.classList.add(input_item);\n\t\t\tinputs.appendChild(input);\n\t\t\tObject.keys(dataNode.inputs[input_item].connections).map(function(output_item, index) {\n\t\t\t\tvar connection = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t\t\t\tvar path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\t\t\t\tpath.classList.add('main-path');\n\t\t\t\tpath.setAttributeNS(null, 'd', '');\n\t\t\t\t// path.innerHTML = 'a';\n\t\t\t\tconnection.classList.add('connection');\n\t\t\t\tconnection.classList.add('node_in_node-' + dataNode.id);\n\t\t\t\tconnection.classList.add('node_out_node-' + dataNode.inputs[input_item].connections[output_item].node);\n\t\t\t\tconnection.classList.add(dataNode.inputs[input_item].connections[output_item].input);\n\t\t\t\tconnection.classList.add(input_item);\n\n\t\t\t\tconnection.appendChild(path);\n\t\t\t\tprecanvas.appendChild(connection);\n\t\t\t});\n\t\t});\n\n\t\tfor (var x = 0; x < Object.keys(dataNode.outputs).length; x++) {\n\t\t\tconst output = document.createElement('div');\n\t\t\toutput.classList.add('output');\n\t\t\toutput.classList.add('output_' + (x + 1));\n\t\t\toutputs.appendChild(output);\n\t\t}\n\n\t\tconst content = document.createElement('div');\n\t\tcontent.classList.add('drawflow_content_node');\n\n\t\tif (dataNode.typenode === false) {\n\t\t\tcontent.innerHTML = dataNode.html;\n\t\t} else if (dataNode.typenode === true) {\n\t\t\tcontent.appendChild(this.noderegister[dataNode.html].html.cloneNode(true));\n\t\t} else {\n\t\t\tif (parseInt(this.render.version) === 3) {\n\t\t\t\t//Vue 3\n\t\t\t\tlet wrapper = this.render.h(this.noderegister[dataNode.html].html, this.noderegister[dataNode.html].props, this.noderegister[dataNode.html].options);\n\t\t\t\twrapper.appContext = this.parent;\n\t\t\t\tthis.render.render(wrapper, content);\n\t\t\t} else {\n\t\t\t\t//Vue 2\n\t\t\t\tlet wrapper = new this.render({\n\t\t\t\t\tparent: this.parent,\n\t\t\t\t\trender: h => h(this.noderegister[dataNode.html].html, { props: this.noderegister[dataNode.html].props }),\n\t\t\t\t\t...this.noderegister[dataNode.html].options,\n\t\t\t\t}).$mount();\n\t\t\t\tcontent.appendChild(wrapper.$el);\n\t\t\t}\n\t\t}\n\n\t\tObject.entries(dataNode.data).forEach(function(key, value) {\n\t\t\tif (typeof key[1] === 'object') {\n\t\t\t\tinsertObjectkeys(null, key[0], key[0]);\n\t\t\t} else {\n\t\t\t\tvar elems = content.querySelectorAll('[df-' + key[0] + ']');\n\t\t\t\tfor (var i = 0; i < elems.length; i++) {\n\t\t\t\t\telems[i].value = key[1];\n\t\t\t\t\tif (elems[i].isContentEditable) {\n\t\t\t\t\t\telems[i].innerText = key[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfunction insertObjectkeys(object, name, completname) {\n\t\t\tif (object === null) {\n\t\t\t\tvar object = dataNode.data[name];\n\t\t\t} else {\n\t\t\t\tvar object = object[name];\n\t\t\t}\n\t\t\tif (object !== null) {\n\t\t\t\tObject.entries(object).forEach(function(key, value) {\n\t\t\t\t\tif (typeof key[1] === 'object') {\n\t\t\t\t\t\tinsertObjectkeys(object, key[0], completname + '-' + key[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar elems = content.querySelectorAll('[df-' + completname + '-' + key[0] + ']');\n\t\t\t\t\t\tfor (var i = 0; i < elems.length; i++) {\n\t\t\t\t\t\t\telems[i].value = key[1];\n\t\t\t\t\t\t\tif (elems[i].isContentEditable) {\n\t\t\t\t\t\t\t\telems[i].innerText = key[1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tnode.appendChild(inputs);\n\t\tnode.appendChild(content);\n\t\tnode.appendChild(outputs);\n\t\tnode.appendChild(uifm_options);\n\t\tnode.appendChild(uifm_options_delete);\n\n\t\tnode.style.top = dataNode.pos_y + 'px';\n\t\tnode.style.left = dataNode.pos_x + 'px';\n\t\tparent.appendChild(node);\n\t\tthis.precanvas.appendChild(parent);\n\n\t\t//edit icon\n\t\tnode.addEventListener('mouseenter', function() {\n\t\t\t// Show the element with class 'drawflow_uifm_opt_edit' within this node\n\t\t\tthis.querySelector('.drawflow_uifm_opt_edit').style.display = 'block';\n\t\t\tthis.querySelector('.drawflow_uifm_opt_delete').style.display = 'block';\n\t\t});\n\n\t\tnode.addEventListener('mouseleave', function() {\n\t\t\t// Hide the element with class 'drawflow_uifm_opt_edit' within this node\n\t\t\tthis.querySelector('.drawflow_uifm_opt_edit').style.display = 'none';\n\t\t\tthis.querySelector('.drawflow_uifm_opt_delete').style.display = 'none';\n\t\t});\n\n\t\tconst self = this;\n\t\tdocument.querySelector(`#node-${dataNode.id} .drawflow_uifm_opt_edit`).addEventListener('click', function() {\n\t\t\tdocument.querySelectorAll('.drawflow-node').forEach(node => {\n\t\t\t\tif (node.classList.contains('selected')) {\n\t\t\t\t\t// Remove the 'selected' class\n\t\t\t\t\tnode.classList.remove('selected');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tself.selectNode(dataNode.id);\n\t\t\tdocument.querySelector('.sfdc-nav-tabs a[href=\"#uiformc-menu-sec1\"]').click();\n\t\t});\n\t\tdocument.querySelector(`#node-${dataNode.id} .drawflow_uifm_opt_delete`).addEventListener('click', function() {\n\t\t\tself.selectNode(dataNode.id);\n\t\t\tif (self.node_selected) {\n\t\t\t\tself.dispatch('uifmNodeUnselected', dataNode.data.id);\n\n\t\t\t\tself.removeNodeId(self.node_selected.id);\n\t\t\t}\n\n\t\t\tif (self.connection_selected) {\n\t\t\t\tself.removeConnection();\n\t\t\t}\n\n\t\t\tif (self.node_selected != null) {\n\t\t\t\tself.node_selected.classList.remove('selected');\n\t\t\t\tself.node_selected = null;\n\t\t\t\tself.dispatch('nodeUnselected', true);\n\t\t\t}\n\t\t\tif (self.connection_selected != null) {\n\t\t\t\tself.connection_selected.classList.remove('selected');\n\t\t\t\tself.removeReouteConnectionSelected();\n\t\t\t\tself.connection_selected = null;\n\t\t\t}\n\t\t});\n\t}\n\n\taddRerouteImport(dataNode) {\n\t\tconst reroute_width = this.reroute_width;\n\t\tconst reroute_fix_curvature = this.reroute_fix_curvature;\n\t\tconst container = this.container;\n\t\tObject.keys(dataNode.outputs).map(function(output_item, index) {\n\t\t\tObject.keys(dataNode.outputs[output_item].connections).map(function(input_item, index) {\n\t\t\t\tconst points = dataNode.outputs[output_item].connections[input_item].points;\n\t\t\t\tif (points !== undefined) {\n\t\t\t\t\tpoints.forEach((item, i) => {\n\t\t\t\t\t\tconst input_id = dataNode.outputs[output_item].connections[input_item].node;\n\t\t\t\t\t\tconst input_class = dataNode.outputs[output_item].connections[input_item].output;\n\t\t\t\t\t\tconst ele = container.querySelector('.connection.node_in_node-' + input_id + '.node_out_node-' + dataNode.id + '.' + output_item + '.' + input_class);\n\n\t\t\t\t\t\tif (reroute_fix_curvature) {\n\t\t\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\t\t\tfor (var z = 0; z < points.length; z++) {\n\t\t\t\t\t\t\t\t\tvar path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\t\t\t\t\t\t\t\t\tpath.classList.add('main-path');\n\t\t\t\t\t\t\t\t\tpath.setAttributeNS(null, 'd', '');\n\t\t\t\t\t\t\t\t\tele.appendChild(path);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst point = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n\t\t\t\t\t\tpoint.classList.add('point');\n\t\t\t\t\t\tvar pos_x = item.pos_x;\n\t\t\t\t\t\tvar pos_y = item.pos_y;\n\n\t\t\t\t\t\tpoint.setAttributeNS(null, 'cx', pos_x);\n\t\t\t\t\t\tpoint.setAttributeNS(null, 'cy', pos_y);\n\t\t\t\t\t\tpoint.setAttributeNS(null, 'r', reroute_width);\n\n\t\t\t\t\t\tele.appendChild(point);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tupdateNodeValue(event) {\n\t\tvar attr = event.target.attributes;\n\t\tfor (var i = 0; i < attr.length; i++) {\n\t\t\tif (attr[i].nodeName.startsWith('df-')) {\n\t\t\t\tvar keys = attr[i].nodeName.slice(3).split('-');\n\t\t\t\tvar target = this.drawflow.drawflow[this.module].data[event.target.closest('.drawflow_content_node').parentElement.id.slice(5)].data;\n\t\t\t\tfor (var index = 0; index < keys.length - 1; index += 1) {\n\t\t\t\t\tif (target[keys[index]] == null) {\n\t\t\t\t\t\ttarget[keys[index]] = {};\n\t\t\t\t\t}\n\t\t\t\t\ttarget = target[keys[index]];\n\t\t\t\t}\n\t\t\t\ttarget[keys[keys.length - 1]] = event.target.value;\n\t\t\t\tif (event.target.isContentEditable) {\n\t\t\t\t\ttarget[keys[keys.length - 1]] = event.target.innerText;\n\t\t\t\t}\n\t\t\t\tthis.dispatch('nodeDataChanged', event.target.closest('.drawflow_content_node').parentElement.id.slice(5));\n\t\t\t}\n\t\t}\n\t}\n\tupdateNodeNameFromId(id, newName) {\n\t\tvar moduleName = this.getModuleFromNodeId(id);\n\t\tthis.drawflow.drawflow[moduleName].data[id].name = newName;\n\t\tthis.drawflow.drawflow[moduleName].data[id].html = `<div>${newName}</div>`;\n\t}\n\tupdateNodeDataFromId(id, data) {\n\t\tvar moduleName = this.getModuleFromNodeId(id);\n\t\tthis.drawflow.drawflow[moduleName].data[id].data = data;\n\t\tif (this.module === moduleName) {\n\t\t\tconst content = this.container.querySelector('#node-' + id);\n\n\t\t\tObject.entries(data).forEach(function(key, value) {\n\t\t\t\tif (typeof key[1] === 'object') {\n\t\t\t\t\tinsertObjectkeys(null, key[0], key[0]);\n\t\t\t\t} else {\n\t\t\t\t\tvar elems = content.querySelectorAll('[df-' + key[0] + ']');\n\t\t\t\t\tfor (var i = 0; i < elems.length; i++) {\n\t\t\t\t\t\telems[i].value = key[1];\n\t\t\t\t\t\tif (elems[i].isContentEditable) {\n\t\t\t\t\t\t\telems[i].innerText = key[1];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfunction insertObjectkeys(object, name, completname) {\n\t\t\t\tif (object === null) {\n\t\t\t\t\tvar object = data[name];\n\t\t\t\t} else {\n\t\t\t\t\tvar object = object[name];\n\t\t\t\t}\n\t\t\t\tif (object !== null) {\n\t\t\t\t\tObject.entries(object).forEach(function(key, value) {\n\t\t\t\t\t\tif (typeof key[1] === 'object') {\n\t\t\t\t\t\t\tinsertObjectkeys(object, key[0], completname + '-' + key[0]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar elems = content.querySelectorAll('[df-' + completname + '-' + key[0] + ']');\n\t\t\t\t\t\t\tfor (var i = 0; i < elems.length; i++) {\n\t\t\t\t\t\t\t\telems[i].value = key[1];\n\t\t\t\t\t\t\t\tif (elems[i].isContentEditable) {\n\t\t\t\t\t\t\t\t\telems[i].innerText = key[1];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\taddNodeInput(id) {\n\t\tvar moduleName = this.getModuleFromNodeId(id);\n\t\tconst infoNode = this.getNodeFromId(id);\n\t\tconst numInputs = Object.keys(infoNode.inputs).length;\n\t\tif (this.module === moduleName) {\n\t\t\t//Draw input\n\t\t\tconst input = document.createElement('div');\n\t\t\tinput.classList.add('input');\n\t\t\tinput.classList.add('input_' + (numInputs + 1));\n\t\t\tconst parent = this.container.querySelector('#node-' + id + ' .inputs');\n\t\t\tparent.appendChild(input);\n\t\t\tthis.updateConnectionNodes('node-' + id);\n\t\t}\n\t\tthis.drawflow.drawflow[moduleName].data[id].inputs['input_' + (numInputs + 1)] = { connections: [] };\n\t}\n\n\taddNodeOutput(id) {\n\t\tvar moduleName = this.getModuleFromNodeId(id);\n\t\tconst infoNode = this.getNodeFromId(id);\n\t\tconst numOutputs = Object.keys(infoNode.outputs).length;\n\t\tif (this.module === moduleName) {\n\t\t\t//Draw output\n\t\t\tconst output = document.createElement('div');\n\t\t\toutput.classList.add('output');\n\t\t\toutput.classList.add('output_' + (numOutputs + 1));\n\t\t\tconst parent = this.container.querySelector('#node-' + id + ' .outputs');\n\t\t\tparent.appendChild(output);\n\t\t\tthis.updateConnectionNodes('node-' + id);\n\t\t}\n\t\tthis.drawflow.drawflow[moduleName].data[id].outputs['output_' + (numOutputs + 1)] = { connections: [] };\n\t}\n\n\tremoveNodeInput(id, input_class) {\n\t\tvar moduleName = this.getModuleFromNodeId(id);\n\t\tconst infoNode = this.getNodeFromId(id);\n\t\tif (this.module === moduleName) {\n\t\t\tthis.container.querySelector('#node-' + id + ' .inputs .input.' + input_class).remove();\n\t\t}\n\t\tconst removeInputs = [];\n\t\tObject.keys(infoNode.inputs[input_class].connections).map(function(key, index) {\n\t\t\tconst id_output = infoNode.inputs[input_class].connections[index].node;\n\t\t\tconst output_class = infoNode.inputs[input_class].connections[index].input;\n\t\t\tremoveInputs.push({ id_output, id, output_class, input_class });\n\t\t});\n\t\t// Remove connections\n\t\tremoveInputs.forEach((item, i) => {\n\t\t\tthis.removeSingleConnection(item.id_output, item.id, item.output_class, item.input_class);\n\t\t});\n\n\t\tdelete this.drawflow.drawflow[moduleName].data[id].inputs[input_class];\n\n\t\t// Update connection\n\t\tconst connections = [];\n\t\tconst connectionsInputs = this.drawflow.drawflow[moduleName].data[id].inputs;\n\t\tObject.keys(connectionsInputs).map(function(key, index) {\n\t\t\tconnections.push(connectionsInputs[key]);\n\t\t});\n\t\tthis.drawflow.drawflow[moduleName].data[id].inputs = {};\n\t\tconst input_class_id = input_class.slice(6);\n\t\tlet nodeUpdates = [];\n\t\tconnections.forEach((item, i) => {\n\t\t\titem.connections.forEach((itemx, f) => {\n\t\t\t\tnodeUpdates.push(itemx);\n\t\t\t});\n\t\t\tthis.drawflow.drawflow[moduleName].data[id].inputs['input_' + (i + 1)] = item;\n\t\t});\n\t\tnodeUpdates = new Set(nodeUpdates.map(e => JSON.stringify(e)));\n\t\tnodeUpdates = Array.from(nodeUpdates).map(e => JSON.parse(e));\n\n\t\tif (this.module === moduleName) {\n\t\t\tconst eles = this.container.querySelectorAll('#node-' + id + ' .inputs .input');\n\t\t\teles.forEach((item, i) => {\n\t\t\t\tconst id_class = item.classList[1].slice(6);\n\t\t\t\tif (parseInt(input_class_id) < parseInt(id_class)) {\n\t\t\t\t\titem.classList.remove('input_' + id_class);\n\t\t\t\t\titem.classList.add('input_' + (id_class - 1));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tnodeUpdates.forEach((itemx, i) => {\n\t\t\tthis.drawflow.drawflow[moduleName].data[itemx.node].outputs[itemx.input].connections.forEach((itemz, g) => {\n\t\t\t\tif (itemz.node == id) {\n\t\t\t\t\tconst output_id = itemz.output.slice(6);\n\t\t\t\t\tif (parseInt(input_class_id) < parseInt(output_id)) {\n\t\t\t\t\t\tif (this.module === moduleName) {\n\t\t\t\t\t\t\tconst ele = this.container.querySelector('.connection.node_in_node-' + id + '.node_out_node-' + itemx.node + '.' + itemx.input + '.input_' + output_id);\n\t\t\t\t\t\t\tele.classList.remove('input_' + output_id);\n\t\t\t\t\t\t\tele.classList.add('input_' + (output_id - 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (itemz.points) {\n\t\t\t\t\t\t\tthis.drawflow.drawflow[moduleName].data[itemx.node].outputs[itemx.input].connections[g] = { node: itemz.node, output: 'input_' + (output_id - 1), points: itemz.points };\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.drawflow.drawflow[moduleName].data[itemx.node].outputs[itemx.input].connections[g] = { node: itemz.node, output: 'input_' + (output_id - 1) };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tthis.updateConnectionNodes('node-' + id);\n\t}\n\n\tremoveNodeOutput(id, output_class) {\n\t\tvar moduleName = this.getModuleFromNodeId(id);\n\t\tconst infoNode = this.getNodeFromId(id);\n\t\tif (this.module === moduleName) {\n\t\t\tthis.container.querySelector('#node-' + id + ' .outputs .output.' + output_class).remove();\n\t\t}\n\t\tconst removeOutputs = [];\n\t\tObject.keys(infoNode.outputs[output_class].connections).map(function(key, index) {\n\t\t\tconst id_input = infoNode.outputs[output_class].connections[index].node;\n\t\t\tconst input_class = infoNode.outputs[output_class].connections[index].output;\n\t\t\tremoveOutputs.push({ id, id_input, output_class, input_class });\n\t\t});\n\t\t// Remove connections\n\t\tremoveOutputs.forEach((item, i) => {\n\t\t\tthis.removeSingleConnection(item.id, item.id_input, item.output_class, item.input_class);\n\t\t});\n\n\t\tdelete this.drawflow.drawflow[moduleName].data[id].outputs[output_class];\n\n\t\t// Update connection\n\t\tconst connections = [];\n\t\tconst connectionsOuputs = this.drawflow.drawflow[moduleName].data[id].outputs;\n\t\tObject.keys(connectionsOuputs).map(function(key, index) {\n\t\t\tconnections.push(connectionsOuputs[key]);\n\t\t});\n\t\tthis.drawflow.drawflow[moduleName].data[id].outputs = {};\n\t\tconst output_class_id = output_class.slice(7);\n\t\tlet nodeUpdates = [];\n\t\tconnections.forEach((item, i) => {\n\t\t\titem.connections.forEach((itemx, f) => {\n\t\t\t\tnodeUpdates.push({ node: itemx.node, output: itemx.output });\n\t\t\t});\n\t\t\tthis.drawflow.drawflow[moduleName].data[id].outputs['output_' + (i + 1)] = item;\n\t\t});\n\t\tnodeUpdates = new Set(nodeUpdates.map(e => JSON.stringify(e)));\n\t\tnodeUpdates = Array.from(nodeUpdates).map(e => JSON.parse(e));\n\n\t\tif (this.module === moduleName) {\n\t\t\tconst eles = this.container.querySelectorAll('#node-' + id + ' .outputs .output');\n\t\t\teles.forEach((item, i) => {\n\t\t\t\tconst id_class = item.classList[1].slice(7);\n\t\t\t\tif (parseInt(output_class_id) < parseInt(id_class)) {\n\t\t\t\t\titem.classList.remove('output_' + id_class);\n\t\t\t\t\titem.classList.add('output_' + (id_class - 1));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tnodeUpdates.forEach((itemx, i) => {\n\t\t\tthis.drawflow.drawflow[moduleName].data[itemx.node].inputs[itemx.output].connections.forEach((itemz, g) => {\n\t\t\t\tif (itemz.node == id) {\n\t\t\t\t\tconst input_id = itemz.input.slice(7);\n\t\t\t\t\tif (parseInt(output_class_id) < parseInt(input_id)) {\n\t\t\t\t\t\tif (this.module === moduleName) {\n\t\t\t\t\t\t\tconst ele = this.container.querySelector('.connection.node_in_node-' + itemx.node + '.node_out_node-' + id + '.output_' + input_id + '.' + itemx.output);\n\t\t\t\t\t\t\tele.classList.remove('output_' + input_id);\n\t\t\t\t\t\t\tele.classList.remove(itemx.output);\n\t\t\t\t\t\t\tele.classList.add('output_' + (input_id - 1));\n\t\t\t\t\t\t\tele.classList.add(itemx.output);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (itemz.points) {\n\t\t\t\t\t\t\tthis.drawflow.drawflow[moduleName].data[itemx.node].inputs[itemx.output].connections[g] = { node: itemz.node, input: 'output_' + (input_id - 1), points: itemz.points };\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.drawflow.drawflow[moduleName].data[itemx.node].inputs[itemx.output].connections[g] = { node: itemz.node, input: 'output_' + (input_id - 1) };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tthis.updateConnectionNodes('node-' + id);\n\t}\n\n\tremoveNodeId(id) {\n\t\tthis.removeConnectionNodeId(id);\n\t\tvar moduleName = this.getModuleFromNodeId(id.slice(5));\n\t\tif (this.module === moduleName) {\n\t\t\tthis.container.querySelector(`#${id}`).remove();\n\t\t}\n\t\tdelete this.drawflow.drawflow[moduleName].data[id.slice(5)];\n\t\tthis.dispatch('nodeRemoved', id.slice(5));\n\t}\n\n\tremoveConnection() {\n\t\tif (this.connection_selected != null) {\n\t\t\tvar listclass = this.connection_selected.parentElement.classList;\n\t\t\tthis.connection_selected.parentElement.remove();\n\t\t\t//console.log(listclass);\n\t\t\tvar index_out = this.drawflow.drawflow[this.module].data[listclass[2].slice(14)].outputs[listclass[3]].connections.findIndex(function(item, i) {\n\t\t\t\treturn item.node === listclass[1].slice(13) && item.output === listclass[4];\n\t\t\t});\n\t\t\tthis.drawflow.drawflow[this.module].data[listclass[2].slice(14)].outputs[listclass[3]].connections.splice(index_out, 1);\n\n\t\t\tvar index_in = this.drawflow.drawflow[this.module].data[listclass[1].slice(13)].inputs[listclass[4]].connections.findIndex(function(item, i) {\n\t\t\t\treturn item.node === listclass[2].slice(14) && item.input === listclass[3];\n\t\t\t});\n\t\t\tthis.drawflow.drawflow[this.module].data[listclass[1].slice(13)].inputs[listclass[4]].connections.splice(index_in, 1);\n\t\t\tthis.dispatch('connectionRemoved', { output_id: listclass[2].slice(14), input_id: listclass[1].slice(13), output_class: listclass[3], input_class: listclass[4] });\n\t\t\tthis.connection_selected = null;\n\t\t}\n\t}\n\n\tremoveSingleConnection(id_output, id_input, output_class, input_class) {\n\t\tvar nodeOneModule = this.getModuleFromNodeId(id_output);\n\t\tvar nodeTwoModule = this.getModuleFromNodeId(id_input);\n\t\tif (nodeOneModule === nodeTwoModule) {\n\t\t\t// Check nodes in same module.\n\n\t\t\t// Check connection exist\n\t\t\tvar exists = this.drawflow.drawflow[nodeOneModule].data[id_output].outputs[output_class].connections.findIndex(function(item, i) {\n\t\t\t\treturn item.node == id_input && item.output === input_class;\n\t\t\t});\n\t\t\tif (exists > -1) {\n\t\t\t\tif (this.module === nodeOneModule) {\n\t\t\t\t\t// In same module with view.\n\t\t\t\t\tthis.container.querySelector('.connection.node_in_node-' + id_input + '.node_out_node-' + id_output + '.' + output_class + '.' + input_class).remove();\n\t\t\t\t}\n\n\t\t\t\tvar index_out = this.drawflow.drawflow[nodeOneModule].data[id_output].outputs[output_class].connections.findIndex(function(item, i) {\n\t\t\t\t\treturn item.node == id_input && item.output === input_class;\n\t\t\t\t});\n\t\t\t\tthis.drawflow.drawflow[nodeOneModule].data[id_output].outputs[output_class].connections.splice(index_out, 1);\n\n\t\t\t\tvar index_in = this.drawflow.drawflow[nodeOneModule].data[id_input].inputs[input_class].connections.findIndex(function(item, i) {\n\t\t\t\t\treturn item.node == id_output && item.input === output_class;\n\t\t\t\t});\n\t\t\t\tthis.drawflow.drawflow[nodeOneModule].data[id_input].inputs[input_class].connections.splice(index_in, 1);\n\n\t\t\t\tthis.dispatch('connectionRemoved', { output_id: id_output, input_id: id_input, output_class: output_class, input_class: input_class });\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tremoveConnectionNodeId(id) {\n\t\tconst idSearchIn = 'node_in_' + id;\n\t\tconst idSearchOut = 'node_out_' + id;\n\n\t\tconst elemsOut = this.container.querySelectorAll(`.${idSearchOut}`);\n\t\tfor (var i = elemsOut.length - 1; i >= 0; i--) {\n\t\t\tvar listclass = elemsOut[i].classList;\n\n\t\t\tvar index_in = this.drawflow.drawflow[this.module].data[listclass[1].slice(13)].inputs[listclass[4]].connections.findIndex(function(item, i) {\n\t\t\t\treturn item.node === listclass[2].slice(14) && item.input === listclass[3];\n\t\t\t});\n\t\t\tthis.drawflow.drawflow[this.module].data[listclass[1].slice(13)].inputs[listclass[4]].connections.splice(index_in, 1);\n\n\t\t\tvar index_out = this.drawflow.drawflow[this.module].data[listclass[2].slice(14)].outputs[listclass[3]].connections.findIndex(function(item, i) {\n\t\t\t\treturn item.node === listclass[1].slice(13) && item.output === listclass[4];\n\t\t\t});\n\t\t\tthis.drawflow.drawflow[this.module].data[listclass[2].slice(14)].outputs[listclass[3]].connections.splice(index_out, 1);\n\n\t\t\telemsOut[i].remove();\n\n\t\t\tthis.dispatch('connectionRemoved', { output_id: listclass[2].slice(14), input_id: listclass[1].slice(13), output_class: listclass[3], input_class: listclass[4] });\n\t\t}\n\n\t\tconst elemsIn = this.container.querySelectorAll(`.${idSearchIn}`);\n\t\tfor (var i = elemsIn.length - 1; i >= 0; i--) {\n\t\t\tvar listclass = elemsIn[i].classList;\n\n\t\t\tvar index_out = this.drawflow.drawflow[this.module].data[listclass[2].slice(14)].outputs[listclass[3]].connections.findIndex(function(item, i) {\n\t\t\t\treturn item.node === listclass[1].slice(13) && item.output === listclass[4];\n\t\t\t});\n\t\t\tthis.drawflow.drawflow[this.module].data[listclass[2].slice(14)].outputs[listclass[3]].connections.splice(index_out, 1);\n\n\t\t\tvar index_in = this.drawflow.drawflow[this.module].data[listclass[1].slice(13)].inputs[listclass[4]].connections.findIndex(function(item, i) {\n\t\t\t\treturn item.node === listclass[2].slice(14) && item.input === listclass[3];\n\t\t\t});\n\t\t\tthis.drawflow.drawflow[this.module].data[listclass[1].slice(13)].inputs[listclass[4]].connections.splice(index_in, 1);\n\n\t\t\telemsIn[i].remove();\n\n\t\t\tthis.dispatch('connectionRemoved', { output_id: listclass[2].slice(14), input_id: listclass[1].slice(13), output_class: listclass[3], input_class: listclass[4] });\n\t\t}\n\t}\n\n\tgetModuleFromNodeId(id) {\n\t\tvar nameModule;\n\t\tconst editor = this.drawflow.drawflow;\n\t\tObject.keys(editor).map(function(moduleName, index) {\n\t\t\tObject.keys(editor[moduleName].data).map(function(node, index2) {\n\t\t\t\tif (parseInt(node) == parseInt(id)) {\n\t\t\t\t\tnameModule = moduleName;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn nameModule;\n\t}\n\n\taddModule(name) {\n\t\tthis.drawflow.drawflow[name] = { data: {} };\n\t\tthis.dispatch('moduleCreated', name);\n\t}\n\tchangeModule(name) {\n\t\tthis.dispatch('moduleChanged', name);\n\t\tthis.module = name;\n\t\tthis.precanvas.innerHTML = '';\n\t\tthis.canvas_x = 0;\n\t\tthis.canvas_y = 0;\n\t\tthis.pos_x = 0;\n\t\tthis.pos_y = 0;\n\t\tthis.mouse_x = 0;\n\t\tthis.mouse_y = 0;\n\t\tthis.zoom = 1;\n\t\tthis.zoom_last_value = 1;\n\t\tthis.precanvas.style.transform = '';\n\t\tthis.import(this.drawflow, false);\n\t}\n\n\tremoveModule(name) {\n\t\tif (this.module === name) {\n\t\t\tthis.changeModule('Home');\n\t\t}\n\t\tdelete this.drawflow.drawflow[name];\n\t\tthis.dispatch('moduleRemoved', name);\n\t}\n\n\tclearModuleSelected() {\n\t\tthis.precanvas.innerHTML = '';\n\t\tthis.drawflow.drawflow[this.module] = { data: {} };\n\t}\n\n\tclear() {\n\t\tthis.precanvas.innerHTML = '';\n\t\tthis.drawflow = { drawflow: { Home: { data: {} } } };\n\t}\n\texport() {\n\t\tconst dataExport = JSON.parse(JSON.stringify(this.drawflow));\n\t\tthis.dispatch('export', dataExport);\n\t\treturn dataExport;\n\t}\n\tgetDrawflowArr() {\n\t\treturn JSON.parse(JSON.stringify(this.drawflow));\n\t}\n\timport(data, notifi = true) {\n\t\tthis.clear();\n\t\tthis.drawflow = JSON.parse(JSON.stringify(data));\n\t\tthis.load();\n\t\tif (notifi) {\n\t\t\tthis.dispatch('import', 'import');\n\t\t}\n\t}\n\n\t/* Events */\n\ton(event, callback) {\n\t\t// Check if the callback is not a function\n\t\tif (typeof callback !== 'function') {\n\t\t\tconsole.error(`The listener callback must be a function, the given type is ${typeof callback}`);\n\t\t\treturn false;\n\t\t}\n\t\t// Check if the event is not a string\n\t\tif (typeof event !== 'string') {\n\t\t\tconsole.error(`The event name must be a string, the given type is ${typeof event}`);\n\t\t\treturn false;\n\t\t}\n\t\t// Check if this event not exists\n\t\tif (this.events[event] === undefined) {\n\t\t\tthis.events[event] = {\n\t\t\t\tlisteners: [],\n\t\t\t};\n\t\t}\n\t\tthis.events[event].listeners.push(callback);\n\t}\n\n\tremoveListener(event, callback) {\n\t\t// Check if this event not exists\n\n\t\tif (!this.events[event]) return false;\n\n\t\tconst listeners = this.events[event].listeners;\n\t\tconst listenerIndex = listeners.indexOf(callback);\n\t\tconst hasListener = listenerIndex > -1;\n\t\tif (hasListener) listeners.splice(listenerIndex, 1);\n\t}\n\n\tdispatch(event, details) {\n\t\t// Check if this event not exists\n\t\tif (this.events[event] === undefined) {\n\t\t\t// console.error(`This event: ${event} does not exist`);\n\t\t\treturn false;\n\t\t}\n\t\tthis.events[event].listeners.forEach(listener => {\n\t\t\tlistener(details);\n\t\t});\n\t}\n\n\tgetUuid() {\n\t\t// http://www.ietf.org/rfc/rfc4122.txt\n\t\tvar s = [];\n\t\tvar hexDigits = '0123456789abcdef';\n\t\tfor (var i = 0; i < 36; i++) {\n\t\t\ts[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n\t\t}\n\t\ts[14] = '4'; // bits 12-15 of the time_hi_and_version field to 0010\n\t\ts[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\n\t\ts[8] = s[13] = s[18] = s[23] = '-';\n\n\t\tvar uuid = s.join('');\n\t\treturn uuid;\n\t}\n}\n"],"sourceRoot":""}